{"total":78,"pageSize":10,"pageCount":8,"data":[{"title":"echarts的使用","slug":"tools/echarts","date":"2021-01-11T10:20:21.000Z","updated":"2024-06-30T10:35:56.312Z","comments":true,"path":"api/articles/tools/echarts.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635172298arping-network-scanning-tool.png","content":"<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> echarts = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;echarts&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> chartDom = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;main&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> myChart = echarts.init(chartDom);</span><br><span class=\"line\"><span class=\"keyword\">var</span> option;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> colors = [<span class=\"string\">&#x27;#FFAE57&#x27;</span>, <span class=\"string\">&#x27;#FF7853&#x27;</span>, <span class=\"string\">&#x27;#EA5151&#x27;</span>, <span class=\"string\">&#x27;#CC3F57&#x27;</span>, <span class=\"string\">&#x27;#9A2555&#x27;</span>];</span><br><span class=\"line\"><span class=\"keyword\">const</span> bgColor = <span class=\"string\">&#x27;#2E2733&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> itemStyle = &#123;</span><br><span class=\"line\">  star5: &#123;</span><br><span class=\"line\">    color: colors[<span class=\"number\">0</span>]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  star4: &#123;</span><br><span class=\"line\">    color: colors[<span class=\"number\">1</span>]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  star3: &#123;</span><br><span class=\"line\">    color: colors[<span class=\"number\">2</span>]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  star2: &#123;</span><br><span class=\"line\">    color: colors[<span class=\"number\">3</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> data = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">&#x27;虚构&#x27;</span>,</span><br><span class=\"line\">    itemStyle: &#123;</span><br><span class=\"line\">      color: colors[<span class=\"number\">1</span>]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    children: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;小说&#x27;</span>,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;5☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;疼&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;慈悲&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;楼下的房客&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;4☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;虚无的十字架&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;无声告白&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;童年的终结&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;3☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;疯癫老人日记&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;其他&#x27;</span>,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;5☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;纳博科夫短篇小说全集&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;4☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;安魂曲&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;人生拼图版&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;3☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;比起爱你，我更需要你&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">&#x27;非虚构&#x27;</span>,</span><br><span class=\"line\">    itemStyle: &#123;</span><br><span class=\"line\">      color: colors[<span class=\"number\">2</span>]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    children: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;设计&#x27;</span>,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;5☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;无界面交互&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;4☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;数字绘图的光照与渲染技术&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;日本建筑解剖书&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;3☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;奇幻世界艺术\\n&amp;RPG地图绘制讲座&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;社科&#x27;</span>,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;5☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;痛点&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;4☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;卓有成效的管理者&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;进化&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;后物欲时代的来临&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;3☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;疯癫与文明&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;心理&#x27;</span>,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;5☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;我们时代的神经症人格&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;4☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;皮格马利翁效应&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;受伤的人&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;3☆&#x27;</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;2☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;迷恋&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;居家&#x27;</span>,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;4☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;把房子住成家&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;只过必要生活&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;北欧简约风格&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;绘本&#x27;</span>,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;5☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;设计诗&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;4☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;假如生活糊弄了你&#x27;</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;博物学家的神秘动物图鉴&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;3☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;方向&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;哲学&#x27;</span>,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;4☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;人生的智慧&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;技术&#x27;</span>,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;5☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;代码整洁之道&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            name: <span class=\"string\">&#x27;4☆&#x27;</span>,</span><br><span class=\"line\">            children: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                name: <span class=\"string\">&#x27;Three.js 开发指南&#x27;</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; data.length; ++j) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> level1 = data[j].children;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; level1.length; ++i) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> block = level1[i].children;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> bookScore = [];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> bookScoreId;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> star = <span class=\"number\">0</span>; star &lt; block.length; ++star) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> style = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (name) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">case</span> <span class=\"string\">&#x27;5☆&#x27;</span>:</span><br><span class=\"line\">            bookScoreId = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> itemStyle.star5;</span><br><span class=\"line\">          <span class=\"keyword\">case</span> <span class=\"string\">&#x27;4☆&#x27;</span>:</span><br><span class=\"line\">            bookScoreId = <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> itemStyle.star4;</span><br><span class=\"line\">          <span class=\"keyword\">case</span> <span class=\"string\">&#x27;3☆&#x27;</span>:</span><br><span class=\"line\">            bookScoreId = <span class=\"number\">2</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> itemStyle.star3;</span><br><span class=\"line\">          <span class=\"keyword\">case</span> <span class=\"string\">&#x27;2☆&#x27;</span>:</span><br><span class=\"line\">            bookScoreId = <span class=\"number\">3</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> itemStyle.star2;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)(block[star].name);</span><br><span class=\"line\">      block[star].label = &#123;</span><br><span class=\"line\">        color: style.color,</span><br><span class=\"line\">        downplay: &#123;</span><br><span class=\"line\">          opacity: <span class=\"number\">0.5</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (block[star].children) &#123;</span><br><span class=\"line\">        style = &#123;</span><br><span class=\"line\">          opacity: <span class=\"number\">1</span>,</span><br><span class=\"line\">          color: style.color</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        block[star].children.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">book</span>) </span>&#123;</span><br><span class=\"line\">          book.value = <span class=\"number\">1</span>;</span><br><span class=\"line\">          book.itemStyle = style;</span><br><span class=\"line\">          book.label = &#123;</span><br><span class=\"line\">            color: style.color</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> value = <span class=\"number\">1</span>;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (bookScoreId === <span class=\"number\">0</span> || bookScoreId === <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">            value = <span class=\"number\">5</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (bookScore[bookScoreId]) &#123;</span><br><span class=\"line\">            bookScore[bookScoreId].value += value;</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            bookScore[bookScoreId] = &#123;</span><br><span class=\"line\">              color: colors[bookScoreId],</span><br><span class=\"line\">              value: value</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    level1[i].itemStyle = &#123;</span><br><span class=\"line\">      color: data[j].itemStyle.color</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">option = &#123;</span><br><span class=\"line\">  backgroundColor: bgColor,</span><br><span class=\"line\">  color: colors,</span><br><span class=\"line\">  series: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      type: <span class=\"string\">&#x27;sunburst&#x27;</span>,</span><br><span class=\"line\">      center: [<span class=\"string\">&#x27;50%&#x27;</span>, <span class=\"string\">&#x27;48%&#x27;</span>],</span><br><span class=\"line\">      data: data,</span><br><span class=\"line\">      sort: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (a.depth === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> b.getValue() - a.getValue();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> a.dataIndex - b.dataIndex;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      label: &#123;</span><br><span class=\"line\">        rotate: <span class=\"string\">&#x27;radial&#x27;</span>,</span><br><span class=\"line\">        color: bgColor</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      itemStyle: &#123;</span><br><span class=\"line\">        borderColor: bgColor,</span><br><span class=\"line\">        borderWidth: <span class=\"number\">2</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      levels: [</span><br><span class=\"line\">        &#123;&#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          r0: <span class=\"number\">0</span>,</span><br><span class=\"line\">          r: <span class=\"number\">40</span>,</span><br><span class=\"line\">          label: &#123;</span><br><span class=\"line\">            rotate: <span class=\"number\">0</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          r0: <span class=\"number\">40</span>,</span><br><span class=\"line\">          r: <span class=\"number\">105</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          r0: <span class=\"number\">115</span>,</span><br><span class=\"line\">          r: <span class=\"number\">140</span>,</span><br><span class=\"line\">          itemStyle: &#123;</span><br><span class=\"line\">            shadowBlur: <span class=\"number\">2</span>,</span><br><span class=\"line\">            shadowColor: colors[<span class=\"number\">2</span>],</span><br><span class=\"line\">            color: <span class=\"string\">&#x27;transparent&#x27;</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          label: &#123;</span><br><span class=\"line\">            rotate: <span class=\"string\">&#x27;tangential&#x27;</span>,</span><br><span class=\"line\">            fontSize: <span class=\"number\">10</span>,</span><br><span class=\"line\">            color: colors[<span class=\"number\">0</span>]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          r0: <span class=\"number\">140</span>,</span><br><span class=\"line\">          r: <span class=\"number\">145</span>,</span><br><span class=\"line\">          itemStyle: &#123;</span><br><span class=\"line\">            shadowBlur: <span class=\"number\">80</span>,</span><br><span class=\"line\">            shadowColor: colors[<span class=\"number\">0</span>]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          label: &#123;</span><br><span class=\"line\">            position: <span class=\"string\">&#x27;outside&#x27;</span>,</span><br><span class=\"line\">            textShadowBlur: <span class=\"number\">5</span>,</span><br><span class=\"line\">            textShadowColor: <span class=\"string\">&#x27;#333&#x27;</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          downplay: &#123;</span><br><span class=\"line\">            label: &#123;</span><br><span class=\"line\">              opacity: <span class=\"number\">0.5</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">option &amp;&amp; myChart.setOption(option);</span><br></pre></td></tr></table></figure>\n\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"应用","path":"api/tags/应用.json"}]},{"title":"perl极简教程","slug":"language/perl/perlbasics","date":"2020-12-26T15:20:21.000Z","updated":"2024-06-30T10:35:56.308Z","comments":true,"path":"api/articles/language/perl/perlbasics.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211026/1635178056perl-banner.png","content":"<p>perl ：practical exteaction report language</p>\n<ol>\n<li><p>perl是动态脚本语言</p>\n</li>\n<li><p>脚本运行是要</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/perl</span></span><br></pre></td></tr></table></figure></li>\n<li><p>使用#单行注释，使用=pod           =cut多行注释</p>\n</li>\n<li><p>perl不关心留白数量</p>\n</li>\n<li><p>heredoc用法，单引号不转义，双引号转义</p>\n</li>\n<li><p>使用反斜杠\\转义</p>\n</li>\n</ol>\n<p>##标量定义</p>\n<p>数字</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$num&#x3D;12;</span><br></pre></td></tr></table></figure>\n\n<p>字符串</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$stri=<span class=\"string\">&quot;string&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>浮点数</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$float=<span class=\"number\">1.2</span>;</span><br></pre></td></tr></table></figure>\n\n<p>数组</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@arr&#x3D;(0,1,2);</span><br></pre></td></tr></table></figure>\n\n<p>字典</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">%map=(<span class=\"string\">&#x27;a&#x27;</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">&#x27;b&#x27;</span>=&gt;<span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"编程原理","path":"api/tags/编程原理.json"},{"name":"perl","path":"api/tags/perl.json"}]},{"title":"py2与py3在closerange的区别","slug":"language/python/differencebwtweenpy2andpy3incloserangefuntion","date":"2020-12-23T15:20:21.000Z","updated":"2024-06-30T10:35:56.308Z","comments":true,"path":"api/articles/language/python/differencebwtweenpy2andpy3incloserangefuntion.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635138448v2-0647c2d439278d31bcb155d70cfeab31_1200x500.jpg","content":"<h2 id=\"file-descriptors（-proc下）\"><a href=\"#file-descriptors（-proc下）\" class=\"headerlink\" title=\"file descriptors（/proc下）\"></a>file descriptors（/proc下）</h2><p>文件描述符在形式上是一个非负整数。实际上，它是一个索引值，指向<a href=\"https://zh.wikipedia.org/wiki/%E5%86%85%E6%A0%B8\">内核</a>为每一个<a href=\"https://zh.wikipedia.org/wiki/%E8%BF%9B%E7%A8%8B\">进程</a>所维护的该进程打开文件的记录表。当程序打开一个现有文件或者创建一个新文件时，内核向进程返回一个文件描述符。在<a href=\"https://zh.wikipedia.org/wiki/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1\">程序设计</a>中，一些涉及底层的程序编写往往会围绕着文件描述符展开。但是文件描述符这一概念往往只适用于<a href=\"https://zh.wikipedia.org/wiki/UNIX\">UNIX</a>、<a href=\"https://zh.wikipedia.org/wiki/Linux\">Linux</a>这样的操作系统。</p>\n<h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><p>文件描述符的优点主要有两个：</p>\n<ul>\n<li>基于文件描述符的<a href=\"https://zh.wikipedia.org/wiki/I/O\">I/O操作</a>兼容<a href=\"https://zh.wikipedia.org/wiki/POSIX\">POSIX</a>标准。</li>\n<li>在UNIX、Linux的系统调用中，大量的系统调用都是依赖于文件描述符</li>\n</ul>\n<p>此外，在Linux系列的操作系统上，由于Linux的设计思想便是把一切设备都视作文件。因此，文件描述符为在该系列平台上进行设备相关的编程实际上提供了一个统一的方法。</p>\n<h3 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h3><p>文件描述符的概念存在两大缺点：</p>\n<ul>\n<li>在非UNIX/Linux <a href=\"https://zh.wikipedia.org/wiki/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F\">操作系统</a>上（如<a href=\"https://zh.wikipedia.org/wiki/Windows\">Windows</a>），无法基于这一概念进行编程——事实上，Windows下的文件描述符和<a href=\"https://zh.wikipedia.org/wiki/%E4%BF%A1%E5%8F%B7%E9%87%8F\">信号量</a>、<a href=\"https://zh.wikipedia.org/wiki/%E4%BA%92%E6%96%A5%E9%94%81\">互斥锁</a>等<a href=\"https://zh.wikipedia.org/wiki/%E5%86%85%E6%A0%B8%E5%AF%B9%E8%B1%A1\">内核对象</a>一样都记作HANDLE。</li>\n<li>由于文件描述符在形式上不过是个整数，当代码量增大时，会使编程者难以分清哪些整数意味着数据，哪些意味着文件描述符。因此，完成的代码可读性也就会变得很差，这一点一般通过消除<a href=\"https://zh.wikipedia.org/wiki/%E9%AD%94%E8%A1%93%E6%95%B8%E5%AD%97\">魔术数字</a>来解决。</li>\n</ul>\n<h2 id=\"知识点\"><a href=\"#知识点\" class=\"headerlink\" title=\"知识点\"></a>知识点</h2><ol>\n<li>在proc目录下，以数字命名的目录表示当前一个运行的进程，目录名即为进程的pid，进程里的fd是文件描述符。</li>\n<li>魔术数字（magic number）是程式设计中所谓的直接写在程式码里的具体数值（如“10”“123”等以数字直接写出的值）。虽然程式作者写的时候自己能了解数值的意义，但对其他程式员而言，甚至制作者本人经过一段时间后，会难以了解这个数值的用途，只能苦笑讽刺“这个数值的意义虽然不懂，不过至少程式会动，真是个魔术般的数字”而得名。</li>\n</ol>\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"编程原理","path":"api/tags/编程原理.json"},{"name":"python","path":"api/tags/python.json"}]},{"title":"JRE和JDK的区别","slug":"language/java/javabasics","date":"2020-11-25T15:20:21.000Z","updated":"2024-06-30T10:35:56.308Z","comments":true,"path":"api/articles/language/java/javabasics.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/16351383024c3f44e8-9100-11eb-9353-fa1e86d74c00.png","content":"<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/16351383024c3f44e8-9100-11eb-9353-fa1e86d74c00.png\" alt=\"0cc3f4a15d3184391a98a7b1c58f6e5f_1440w\"><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/16351383094800a192-9100-11eb-8da9-fa1e86d74c00.png\" alt=\"20171221220833133\"></p>\n<h2 id=\"先给出JDK，JRE，JVM（带上JVM有助于理解）的名词解释\"><a href=\"#先给出JDK，JRE，JVM（带上JVM有助于理解）的名词解释\" class=\"headerlink\" title=\"先给出JDK，JRE，JVM（带上JVM有助于理解）的名词解释\"></a><strong>先给出JDK，JRE，JVM（带上JVM有助于理解）的名词解释</strong></h2><ol>\n<li> Java开发工具包（JDK）是一种用    于开发Java应用程序和applet的软件开发环境。它包括Java运行时环境（JRE）、解释器/加载器（Java）、编译器（javac）、归档器（jar）、文档生成器（Javadoc）和Java开发所需的其他工具。</li>\n<li> JRE代表“Java Runtime Environment”，也可以写成“Java RTE”。Java Runtime Environment提供了执行Java应用程序的最低要求；它由Java虚拟机（JVM）、核心类和支持文件组成。</li>\n<li> 另外也给出了JVM（java virtual machine）的解释。</li>\n</ol>\n<ul>\n<li>  它是一种指定Java虚拟机工作的规范。但是实现提供者对算法的选择是独立的。它的实现由Sun和其他公司提供。</li>\n<li>  满足JVM规范要求的计算机程序的一种实现。</li>\n<li>  运行时实例：每当您在命令提示符下编写java命令来运行java类时，就会创建一个JVM实例。</li>\n</ul>\n<h2 id=\"一-JDK、JRE和JVM的区别\"><a href=\"#一-JDK、JRE和JVM的区别\" class=\"headerlink\" title=\"一. JDK、JRE和JVM的区别\"></a><strong>一. JDK、JRE和JVM的区别</strong></h2><p>为了理解这三者之间的区别，让我们考虑下面的图表。</p>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211017/1634455466v2-20c4773e7e180335fb7f623c79e92303_hd.jpg?source=1940ef5c\" alt=\"img\"></p>\n<ul>\n<li>  <strong>JDK–Java开发工具包</strong>（简称JDK）是一种提供开发和执行（运行）Java程序的环境的工具包。JDK是一个工具包（或包），它包括两个方面</li>\n</ul>\n<ol>\n<li> 开发工具（提供开发java程序的环境）</li>\n<li> JRE（执行java程序）。</li>\n</ol>\n<ul>\n<li>  <strong>JRE–Java Runtime Environment</strong>（也就是说JRE）是一个安装包，它提供的环境只能在您的计算机上运行（而不是开发）Java程序。只有那些只想运行Java程序的用户，也就是系统的最终用户，才会使用JRE。</li>\n<li>  <strong>JVM–Java虚拟机</strong>（JVM）是JDK和JRE的一个非常重要的部分，因为它内置于两者之中。使用JRE或JDK运行的任何Java程序都进入JVM，JVM负责逐行执行Java程序，因此它也被称为解释器。</li>\n</ul>\n<h2 id=\"二-JRE和JDK是如何工作的？\"><a href=\"#二-JRE和JDK是如何工作的？\" class=\"headerlink\" title=\"二. JRE和JDK是如何工作的？\"></a>二. JRE和JDK是如何工作的？</h2><h2 id=\"JRE由什么组成？\"><a href=\"#JRE由什么组成？\" class=\"headerlink\" title=\"JRE由什么组成？\"></a>JRE由什么组成？</h2><p>JRE由以下组件组成：</p>\n<ul>\n<li>  <strong>部署技术</strong>，包括部署、java web start和Java插件。</li>\n<li>  <strong>用户界面工具包</strong>，包括抽象窗口工具包（AWT）、Swing、java2d、辅助功能、图像I/O、打印服务、声音、拖放（DnD）和输入方法。</li>\n<li>  <strong>集成库</strong>，包括接口定义语言（IDL）、Java数据库连接（JDBC）、Java命名和目录接口（JNDI）、远程方法调用（RMI）、Internet Orb间协议远程方法调用（RMI-IIOP）和脚本。</li>\n<li>  <strong>其他基本库</strong>，包括国际支持、输入/输出（I/O）、扩展机制、bean、Java管理扩展（JMX）、Java本机接口（JNI）、数学、网络、覆盖机制、安全性、序列化和Java for XML处理（XML JAXP）。</li>\n<li>  <strong>Lang和util基本库</strong>，包括Lang和util、管理、版本控制、zip、工具、反射、集合、并发实用程序、Java存档（JAR）、日志、首选项API、Ref对象和正则表达式。</li>\n<li>  <strong>Java虚拟机</strong>（JVM），包括Java HotSpot 客户端和<em>Server Virtual Machines</em>。</li>\n</ul>\n<h2 id=\"JRE是如何工作的？\"><a href=\"#JRE是如何工作的？\" class=\"headerlink\" title=\"JRE是如何工作的？\"></a>JRE是如何工作的？</h2><p>为了理解JRE是如何工作的，让我们保存一个java源文件<em>Example.java。</em>该文件被编译成一组字节码，存储在“.class”文件中，这里它就是”<em>Example</em>.class“。</p>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635138321v2-514231f8f6536733d294d76dcefa8d96_hd.jpg?source=1940ef5c\" alt=\"img\"><img src= \"/img/loading.gif\" data-lazy-src=\"https://pic1.zhimg.com/80/v2-514231f8f6536733d294d76dcefa8d96_1440w.jpg?source=1940ef5c\" alt=\"img\"></p>\n<p>下图描述了编译时所做的操作，以下操作在运行时发生：</p>\n<ul>\n<li>  <strong>类加载器</strong></li>\n</ul>\n<p>类加载器加载执行程序所需的所有类。它通过将本地文件系统的名称空间与通过网络导入的名称空间分离来提供安全性。这些文件可以从硬盘、网络或其他来源加载。</p>\n<ul>\n<li>  <strong>字节码校验器</strong></li>\n</ul>\n<p>JVM将代码放入字节码验证器，该验证器检查格式并检查非法代码。例如，非法代码就是违反对象访问权限或违反指针实现的代码。</p>\n<p>字节码验证器确保代码符合JVM规范，并且不违反系统完整性。</p>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211017/16344554731634455456v2-12142cee79304193c837472e149d3aea_hd.jpg?source=1940ef5c\" alt=\"img\"></p>\n<ul>\n<li>  <strong>解释器</strong></li>\n</ul>\n<p>在运行时，字节码由解释器加载、检查和运行。解释器有以下两个功能：</p>\n<ol>\n<li> 执行字节码</li>\n<li> 对底层硬件进行适当的调用</li>\n</ol>\n<p>两种操作可以显示为：</p>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211017/1634455479v2-cc90ac57568556eb923f362b10f05178_hd.jpg?source=1940ef5c\" alt=\"img\"></p>\n<p>要理解JDK和JRE之间的交互，请考虑下面的图：</p>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211017/1634455482v2-7fa711bae33644cbc7ea6981a8eda4cf_hd.jpg?source=1940ef5c\" alt=\"img\"></p>\n<h2 id=\"三-JVM是如何工作的？\"><a href=\"#三-JVM是如何工作的？\" class=\"headerlink\" title=\"三. JVM是如何工作的？\"></a><strong>三. JVM是如何工作的？</strong></h2><p>JVM在Java程序运行时成为JRE的一个实例。它被广泛地称为运行时解释器。JVM在很大程度上有助于从程序员那里抽象出内部实现，这些程序员为自己的程序使用JDK中的库。</p>\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"编程原理","path":"api/tags/编程原理.json"},{"name":"java","path":"api/tags/java.json"}]},{"title":"什么是运行时","slug":"language/common/whatsruntime","date":"2020-11-24T15:20:21.000Z","updated":"2024-06-30T10:35:56.304Z","comments":true,"path":"api/articles/language/common/whatsruntime.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635133952clock-3222267_960_720.jpg","content":"<p>runtime 描述了<strong>程序运行时候</strong>执行的软件/指令， 在每种语言有着不同的实现。可大可小，在 C 中，runtime 是库代码， 等同于 C runtime library，一系列 C 程序运行所需的函数，在 Java 中，runtime 还提供了 Java 程序运行所需的虚拟机等。</p>\n<p>总而言之，<strong>runtime 是一个通用抽象的术语，指的是计算机程序运行的时候所需要的一切代码库，框架，平台等</strong>。</p>\n<p>在 Go 中， 有一个 runtime 库，其实现了垃圾回收，并发控制， 栈管理以及其他一些 Go 语言的关键特性。 runtime 库是每个 Go 程序的一部分，也就是说编译 Go 代码为机器代码时也会将其也编译进来。所以 Go 官方将其定位偏向类似于 C 语言中的库。Go 中的 runtime 不像 Java runtime （JRE， java runtime envirement ) 一样，jre 还会提供虚拟机， Java 程序要在 JRE 下 才能运行。</p>\n<p>所以在 Go 语言中， runtime 只是提供支持语言特性的库的名称，也就是 Go 程序执行时候使用的库。</p>\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"编程原理","path":"api/tags/编程原理.json"}]},{"title":"什么是hyperv","slug":"systemstructure/windows/hyperv","date":"2020-11-13T15:20:21.000Z","updated":"2024-06-30T10:35:56.308Z","comments":true,"path":"api/articles/systemstructure/windows/hyperv.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211026/1635179986966575_original.jpg","content":"<p>Hyper-V是<a href=\"https://baike.baidu.com/item/%E5%BE%AE%E8%BD%AF\">微软</a>的一款虚拟化产品，是微软第一个采用类似Vmware ESXi和Citrix Xen的基于hypervisor的技术。这也意味着<a href=\"https://baike.baidu.com/item/%E5%BE%AE%E8%BD%AF/124767\">微软</a>会更加直接地与市场先行者VMware展开竞争，但竞争的方式会有所不同。Hyper-V是<a href=\"https://baike.baidu.com/item/%E5%BE%AE%E8%BD%AF/124767\">微软</a>提出的一种<a href=\"https://baike.baidu.com/item/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/10844875\">系统管理</a>程序<a href=\"https://baike.baidu.com/item/%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF/276750\">虚拟化技术</a>，能够实现桌面虚拟化 </p>\n<h2 id=\"系统要求\"><a href=\"#系统要求\" class=\"headerlink\" title=\"系统要求\"></a>系统要求</h2><p>1.<a href=\"https://baike.baidu.com/item/Intel/125450\">Intel</a>或者<a href=\"https://baike.baidu.com/item/AMD/5905\">AMD</a>64位处理器 [1] （从Windows10预览版更新19559开始ARM64位处理器也受支持 [2] ）</p>\n<p>2.Windows Server 2008 R2及以上(服务器操作<a href=\"https://baike.baidu.com/item/%E7%B3%BB%E7%BB%9F\">系统</a>)；Windows 7及以上(桌面操作系统)。</p>\n<p>3.硬件辅助虚拟化。这是在现有的<a href=\"https://baike.baidu.com/item/%E5%A4%84%E7%90%86%E5%99%A8\">处理器</a>，包括一个虚拟化的</p>\n<p>选择工具体来说，[Intel vt](<a href=\"https://baike.baidu.com/item/Intel\">https://baike.baidu.com/item/Intel</a> vt/2091588)或AMD-v（ AMD-v，以前的代号为“ Pacifica ”的 ) 。</p>\n<p>4.<a href=\"https://baike.baidu.com/item/CPU/120556\">CPU</a>必须具备硬件的<a href=\"https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E6%89%A7%E8%A1%8C%E4%BF%9D%E6%8A%A4\">数据执行保护</a>（ DEP ）功能，而且该功能必须启动。</p>\n<p>5.内存最低限度为2GB。</p>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635172176resize,m_lfit,w_220,h_220,limit_1\" alt=\"微软虚拟化构架\">微软虚拟化构架</p>\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"编程原理","path":"api/tags/编程原理.json"},{"name":"windows","path":"api/tags/windows.json"}]},{"title":"windows实现延时的几种方式","slug":"systemstructure/windows/batdelay","date":"2020-10-27T13:20:21.000Z","updated":"2024-06-30T10:35:56.308Z","comments":true,"path":"api/articles/systemstructure/windows/batdelay.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635172159delay.c.png","content":"<p>方法一：ping</p>\n<p>缺点:时间精度为1秒,不够精确</p>\n<figure class=\"highlight vb\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@echo <span class=\"keyword\">off</span></span><br><span class=\"line\">@ping <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span> -n <span class=\"number\">6</span> &gt;nul</span><br><span class=\"line\">start gdh.txt</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>方法二：vbs start /wait</p>\n<p>缺点：生成临时文件</p>\n<p>有点：时间精度为0.001秒，精度高</p>\n<figure class=\"highlight vb\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@echo <span class=\"keyword\">off</span></span><br><span class=\"line\">echo wscript.sleep <span class=\"number\">5000</span>&gt;sleep.vbs</span><br><span class=\"line\">start /wait sleep.vbs</span><br><span class=\"line\">start gdh.txt</span><br><span class=\"line\">del /f /s /q sleep.vbs</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>方法三：vbs cscript</p>\n<figure class=\"highlight vb\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@echo <span class=\"keyword\">off</span></span><br><span class=\"line\">echo wscript.sleep <span class=\"number\">5000</span>&gt;sleep.vbs</span><br><span class=\"line\">@cscript sleep.vbs &gt;nul</span><br><span class=\"line\">start gdh.txt</span><br><span class=\"line\">del /f /s /q sleep.vbs</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>方法四：choice</p>\n<p>ssh过去有问题，停不下来</p>\n<p>优点：时间精确，CPU占用低，是最佳选择</p>\n<p>CHOICE：[/C[:]按键表] [/N] [/S] [/T[:]选择值,秒数] [显示文本]<br>其中，/C表示可选则的按键，/N表示不要显示提示信息，/S表示大小写字符敏感方式，/T表示若在批定的时间内没有选择的话，自动执行/C中定义的某个选择值。显示文本是CHOICE命令执行时的提示信息。选择结果将用ERRORLEVEL值来表示</p>\n<figure class=\"highlight vb\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@echo <span class=\"keyword\">off</span></span><br><span class=\"line\">choice /t <span class=\"number\">5</span> /d y /n &gt;nul</span><br><span class=\"line\">start gdh.txt</span><br></pre></td></tr></table></figure>\n\n<p>方法五：for+set+if，时间精度为0.01秒</p>\n<p>缺点：CPU占用高，语句过长，不常用</p>\n<figure class=\"highlight vb\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@echo <span class=\"keyword\">off</span></span><br><span class=\"line\">setlocal enableextensions</span><br><span class=\"line\">echo %time%</span><br><span class=\"line\"><span class=\"keyword\">call</span> :ProcDelay <span class=\"number\">500</span></span><br><span class=\"line\">echo %time%</span><br><span class=\"line\">start gdh.txt</span><br><span class=\"line\">:ProcDelay delayMSec_</span><br><span class=\"line\">setlocal enableextensions</span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">&quot;tokens=1-4 delims=:. &quot;</span> %%h <span class=\"keyword\">in</span> (<span class=\"string\">&quot;%time%&quot;</span>) <span class=\"keyword\">do</span> <span class=\"keyword\">set</span> start_=%%h%%i%%j%%k</span><br><span class=\"line\">:_procwaitloop</span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">&quot;tokens=1-4 delims=:. &quot;</span> %%h <span class=\"keyword\">in</span> (<span class=\"string\">&quot;%time%&quot;</span>) <span class=\"keyword\">do</span> <span class=\"keyword\">set</span> now_=%%h%%i%%j%%k</span><br><span class=\"line\"><span class=\"keyword\">set</span> /a diff_=%now_%-%start_%</span><br><span class=\"line\"><span class=\"keyword\">if</span> %diff_% LSS %<span class=\"number\">1</span> <span class=\"keyword\">goto</span> _procwaitloop</span><br><span class=\"line\">endlocal &amp; <span class=\"keyword\">goto</span> :EOF</span><br></pre></td></tr></table></figure>","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"编程原理","path":"api/tags/编程原理.json"},{"name":"windows","path":"api/tags/windows.json"}]},{"title":"幂等","slug":"systemstructure/web/idempotent","date":"2020-10-23T15:28:21.000Z","updated":"2024-06-30T10:35:56.308Z","comments":true,"path":"api/articles/systemstructure/web/idempotent.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635171881678d01b11450c9eb195769dab8e691c6.png","content":"<p>[toc]</p>\n<h2 id=\"幂等去重\"><a href=\"#幂等去重\" class=\"headerlink\" title=\"幂等去重\"></a>幂等去重</h2><p>最近计算节点网络异常时经常出现请求未响应问题，之前的做法是在接收到任务之后与原先存在的任务做比较,进而判断是否为同一个请求的重试，</p>\n<p>主流的MQ实现在 <code>autocommit=true</code> 时天然实现了幂等</p>\n<p>但考虑业务处理可能出错的情况我们一般会将autocommit设置成false，在业务处理成功后再提交，这时就需要使用上述幂等方案了</p>\n<p>在接收到消息时写入请求Token以实现去重判断（Token可为Topic+Offset）提交后删除Token，整体上可以做到对业务透明</p>\n<h2 id=\"函数式编程\"><a href=\"#函数式编程\" class=\"headerlink\" title=\"函数式编程\"></a>函数式编程</h2><ol>\n<li>没有副作用</li>\n</ol>\n<h3 id=\"什么是幂等性\"><a href=\"#什么是幂等性\" class=\"headerlink\" title=\"什么是幂等性\"></a>什么是幂等性</h3><ol>\n<li>数学表述， 多次调用仍为自身，</li>\n<li>不产生副作用</li>\n<li>带上uuid识别是否是相同的请求，避免重复请求</li>\n<li>ACID 2.0 解释，与分布式中的ACID辨析</li>\n<li>stateless 无状态 何时使用，对内维护状态，对外接口无状态+异步。</li>\n</ol>\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"编程原理","path":"api/tags/编程原理.json"},{"name":"网络","path":"api/tags/网络.json"}]},{"title":"redis搭建","slug":"tools/redis","date":"2020-10-23T13:20:21.000Z","updated":"2024-06-30T10:35:56.312Z","comments":true,"path":"api/articles/tools/redis.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211026/1635180052R-C.6e257f1ac9a9ca4b9066f969e0cf5891?rik=sbTjFdKN01gA8w&riu=http%3a%2f%2fi0.hdslb.com%2fbfs%2farchive%2f67dbfe22879d3ed27ff8231184a733d857221134.png&ehk=6P5sf%2f7nkeSmkuFMQwLmte7X19ldc%2b0JtmPptg0Ij2k%3d&risl=&pid=ImgRaw&r=0","content":"<p>单个节点redis搭建</p>\n<ol>\n<li>从官网或github下载源码</li>\n<li>安装gcc</li>\n<li>make（可设置内存分配器为libc，默认为jemalloc，默认更好）（内存分配器未设置为jemalloc，可能影响并发性能，并加重内存碎片，rust用的也是这个内存分配器， info memory查看内存分配器）</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"redis集群搭建\"><a href=\"#redis集群搭建\" class=\"headerlink\" title=\"redis集群搭建\"></a>redis集群搭建</h2><ol>\n<li><p>一．安装前准备<br>关闭SELinux</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setenforce 0</span><br><span class=\"line\">echo &quot;&#x2F;usr&#x2F;sbin&#x2F;setenforce 0&quot;</span><br><span class=\"line\">sed -i &#39;s&#x2F;^SELINUX&#x3D;enforcing&#x2F;SELINUX&#x3D;disabled&#x2F;g&#39; &#x2F;etc&#x2F;sysconfig&#x2F;selinux </span><br><span class=\"line\">sed -i &#39;s&#x2F;^SELINUX&#x3D;enforcing&#x2F;SELINUX&#x3D;disabled&#x2F;g&#39; &#x2F;etc&#x2F;selinux&#x2F;config</span><br></pre></td></tr></table></figure></li>\n</ol>\n<p>   设置防火墙</p>\n   <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop firewalld</span><br><span class=\"line\">systemctl disable firewalld</span><br><span class=\"line\">vim &#x2F;etc&#x2F;sysconfig&#x2F;iptables</span><br><span class=\"line\">-A INPUT -p tcp -m state --state NEW -m tcp --dport 6379 -j ACCEPT</span><br><span class=\"line\">service iptables restart</span><br></pre></td></tr></table></figure>\n\n\n<p>   时钟校对</p>\n   <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install ntpdate</span><br><span class=\"line\">echo &quot;#Clock synchronization&quot; &gt;&gt; &#x2F;var&#x2F;spool&#x2F;cron&#x2F;root</span><br><span class=\"line\">echo &quot;01 00 * * * &#x2F;sbin&#x2F;ntpdate ntp2.aliyun.com;&#x2F;sbin&#x2F;hwclock -w&quot; &gt;&gt; &#x2F;var&#x2F;spool&#x2F;cron&#x2F;root</span><br></pre></td></tr></table></figure>\n\n\n<p>   调整文件打开数</p>\n   <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &lt;&lt;EOF &gt; &#x2F;etc&#x2F;security&#x2F;limits.d&#x2F;20-nproc.conf </span><br><span class=\"line\">root soft nofile 102400</span><br><span class=\"line\">root hard nofile 102400</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n\n<p>   <code>yum -y install gcc gcc-c++</code><br>   二.安装red is<br>   下载redis安装包</p>\n   <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http:&#x2F;&#x2F;download.redis.io&#x2F;releases&#x2F;redis-5.0.5.tar.gz</span><br><span class=\"line\">tar zxvf redis-5.0.5.tar.gz </span><br><span class=\"line\">cd redis-5.0.5&#x2F;</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\">创建文件目录</span><br></pre></td></tr></table></figure>\n\n<p>   <code>mkdir -p /opt/redis/&#123;db,etc,bin,logs&#125;</code><br>   将启动文件拷贝至文件目录</p>\n<p>   [root@localhost redis-5.0.5]#cd  src/<br>   [root@localhost src]#cp mkreleasehdr.sh redis-benchmark redis-check-aof redis-server redis-cli  /opt/redis/bin<br>   1<br>   2<br>   修改配置文件/opt/redis/etc/redis.conf</p>\n<p>   bind 0.0.0.0  #绑定的IP地址，0.0.0.0对所有开放<br>   protected-mode no  #关闭保护模式，让其他主机连接<br>   port 6379 #服务端口<br>   tcp-backlog 511 #tcp连接等待队列长度<br>   timeout 0<br>   tcp-keepalive 300<br>   daemonize yes #开启后台模式<br>   supervised no<br>   pidfile /var/run/redis_6379.pid #进程文件<br>   loglevel notice<br>   logfile /opt/redis/logs/redis.log #日志文件<br>   databases 1 #数据库的个数，默认16，由于集群不支持切换库，所有只有一个库<br>   always-show-logo yes<br>   #指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合<br>       save <seconds> <changes><br>       Redis默认配置文件中提供了三个条件：<br>   save 900 1<br>   save 300 10<br>   save 60 10000<br>   stop-writes-on-bgsave-error yes #后台备份出错时，是否停止写入keys到哈希槽<br>   rdbcompression yes #数据文件是否压缩<br>   rdbchecksum yes#数据文件执行校验<br>   dbfilename dump-6379.rdb #指定本地数据库文件名，默认值为dump.rdb<br>   dir /opt/redis/db/ #指定本地数据库存放目录<br>   replica-serve-stale-data yes<br>   replica-read-only yes<br>   repl-diskless-sync no<br>   repl-diskless-sync-delay 5<br>   repl-disable-tcp-nodelay no<br>   replica-priority 100<br>   masterauth 123456 #主机授权密码<br>   requirepass 123456 #数据库密码<br>   maxclients 10000 #最大客户端连接数<br>   lazyfree-lazy-eviction no<br>   lazyfree-lazy-expire no<br>   lazyfree-lazy-server-del no<br>   replica-lazy-flush no<br>   appendonly no<br>   appendfilename “appendonly.aof” #启动Redis上启用了AOF，则会加载AOF，这是具有更好的耐久性保证的文件，相当于MySQL的二进制文件<br>   appendfsync everysec #磁盘上刷新数据，每一秒钟一次<br>   no-appendfsync-on-rewrite no #如果您有延迟问题，请将其转换为”yes”。否则，从持久性的角度来看，设置为”no”是最安全的选择。<br>   auto-aof-rewrite-percentage 100<br>   auto-aof-rewrite-min-size 64mb #自动重写附加文件<br>   aof-load-truncated yes<br>   aof-use-rdb-preamble yes<br>   lua-time-limit 5000<br>   cluster-enabled yes #开启集群<br>   cluster-config-file node1-6379.conf #集群节点配置文件，由Redis节点自动创建和更新的,非人工创建<br>   cluster-node-timeout 15000 #集群节点超时,连接不上的时间<br>   cluster-slave-validity-factor 10  #从节点与主节点失联多久，从节点尝试升级成主节点。如果设置成正数，则cluster-node-timeout乘以cluster-slave-validity-factor得到的时间，是从节点与主节点失联后，此从节点数据有效的最长时间，超过这个时间，从节点不会启动故障迁移<br>   cluster-migration-barrier 1 #主节点需要的最小从节点数，只有达到这个数，主节点失败时，它从节点才会进行迁移<br>   cluster-require-full-coverage yes  #在部分key所在的节点不可用时，如果此参数设置为”yes”(默认值), 则整个集群停止接受操作；如果此参数设置为”no”，则集群依然为可达节点上的key提供读操作。<br>   slowlog-log-slower-than 10000<br>   slowlog-max-len 128<br>   latency-monitor-threshold 0<br>   notify-keyspace-events “”<br>   hash-max-ziplist-entries 512<br>   hash-max-ziplist-value 64<br>   list-max-ziplist-size -2<br>   list-compress-depth 0<br>   set-max-intset-entries 512<br>   zset-max-ziplist-entries 128<br>   zset-max-ziplist-value 64<br>   hll-sparse-max-bytes 3000<br>   stream-node-max-bytes 4096<br>   stream-node-max-entries 100<br>   activerehashing yes<br>   client-output-buffer-limit normal 0 0 0<br>   client-output-buffer-limit replica 256mb 64mb 60<br>   client-output-buffer-limit pubsub 32mb 8mb 60<br>   hz 10 #Redis调用一个内部函数来执行许多后台任务<br>   dynamic-hz yes<br>   aof-rewrite-incremental-fsync yes<br>   rdb-save-incremental-fsync yes<br>   配置启动脚本</p>\n<p>   #!/bin/sh</p>\n<h1 id=\"chkconfig-35-10-90\"><a href=\"#chkconfig-35-10-90\" class=\"headerlink\" title=\"chkconfig: 35 10 90\"></a>chkconfig: 35 10 90</h1><p>   #重要！否则chkconfig不能识别开机启动服务项；<br>   #”35”为运行级别，”10”为启动优先级，”90”为关闭优先级<br>   #</p>\n<h1 id=\"Simple-Redis-init-d-script-conceived-to-work-on-Linux-systems\"><a href=\"#Simple-Redis-init-d-script-conceived-to-work-on-Linux-systems\" class=\"headerlink\" title=\"Simple Redis init.d script conceived to work on Linux systems\"></a>Simple Redis init.d script conceived to work on Linux systems</h1><h1 id=\"as-it-does-use-of-the-proc-filesystem\"><a href=\"#as-it-does-use-of-the-proc-filesystem\" class=\"headerlink\" title=\"as it does use of the /proc filesystem.\"></a>as it does use of the /proc filesystem.</h1><p>   REDISPORT=6379<br>   EXEC=/opt/redis/bin/redis-server</p>\n<h1 id=\"CLIEXEC-usr-local-bin-redis-cli\"><a href=\"#CLIEXEC-usr-local-bin-redis-cli\" class=\"headerlink\" title=\"CLIEXEC=/usr/local/bin/redis-cli\"></a>CLIEXEC=/usr/local/bin/redis-cli</h1><p>   CLIEXEC=/opt/redis/bin/redis-cli</p>\n<h1 id=\"PIDFILE-var-run-redis-REDISPORT-pid\"><a href=\"#PIDFILE-var-run-redis-REDISPORT-pid\" class=\"headerlink\" title=\"PIDFILE=/var/run/redis_${REDISPORT}.pid\"></a>PIDFILE=/var/run/redis_${REDISPORT}.pid</h1><p>   PIDFILE=/var/run/redis_${REDISPORT}.pid</p>\n<h1 id=\"CONF-”-etc-redis-REDISPORT-conf”\"><a href=\"#CONF-”-etc-redis-REDISPORT-conf”\" class=\"headerlink\" title=\"CONF=”/etc/redis/${REDISPORT}.conf”\"></a>CONF=”/etc/redis/${REDISPORT}.conf”</h1><p>   CONF=”/opt/redis/etc/redis.conf”</p>\n<p>   USER=root            #添加执行用户变量</p>\n<p>   case “$1” in<br>       start)<br>           if [ -f $PIDFILE ]<br>           then<br>                   echo “$PIDFILE exists, process is already running or crashed”<br>           else<br>                   echo “Starting Redis server…”<br>                   $EXEC $CONF</p>\n   <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    fi</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">stop)</span><br><span class=\"line\">    if [ ! -f $PIDFILE ]</span><br><span class=\"line\">    then</span><br><span class=\"line\">            echo &quot;$PIDFILE does not exist, process is not running&quot;</span><br><span class=\"line\">    else</span><br><span class=\"line\">            PID&#x3D;$(cat $PIDFILE)</span><br><span class=\"line\">            echo &quot;Stopping ...&quot;</span><br><span class=\"line\">            $CLIEXEC -p $REDISPORT shutdown</span><br><span class=\"line\">            while [ -x &#x2F;proc&#x2F;$&#123;PID&#125; ]</span><br><span class=\"line\">            do</span><br><span class=\"line\">                echo &quot;Waiting for Redis to shutdown ...&quot;</span><br><span class=\"line\">                sleep 1</span><br><span class=\"line\">            done</span><br><span class=\"line\">            echo &quot;Redis stopped&quot;</span><br><span class=\"line\">    fi</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">restart|force-reload)</span><br><span class=\"line\">            $&#123;0&#125; stop</span><br><span class=\"line\">            $&#123;0&#125; start</span><br><span class=\"line\">            ;;</span><br><span class=\"line\">    *)</span><br><span class=\"line\">            echo &quot;Usage: &#x2F;etc&#x2F;init.d&#x2F;redis-server &#123;start|stop|restart|force-reload&#125;&quot; &gt;&amp;2</span><br><span class=\"line\">            exit 1</span><br><span class=\"line\">将脚本放置&#x2F;etc&#x2F;init.d&#x2F;redis-server</span><br></pre></td></tr></table></figure>\n<p>   设置开机自启</p>\n<p>   [root@localhost ~]#chkconfig –add redis-server<br>   [root@localhost ~]#chkconfig –level 35 redis-server on  #默认runlevel 35已打开<br>   1<br>   2<br>   启动脚本设置执行权限</p>\n<p>   [root@localhost ~]#chmod +x /etc/init.d/redis-server<br>   1<br>   启动redis<br>   #可通过启动脚本启动/关闭服务；或采用”service”指令</p>\n<p>   [root@localhost ~]#/etc/init.d/redis-server start<br>   1<br>   创建集群<br>   在5.0之前该工具是由ruby语言编写的redis-trib.rb，在使用前需要安装ruby语言环境。在5.0之后redis摒弃了该工具，将搭建集群的功能合并到了redis-cli上。<br>   这里就可以直接创建集群，不需要在安装其他工具。</p>\n<p>   创建集群需要注意,最少要6个服务,否则创建集群失败.</p>\n<p>   redis-cli –cluster create 110.110.100.35:6379 110.110.100.36:6379 110.110.100.37:6379 110.110.100.38:6379 110.10.1100.39:6379 110.10.100.40:6379 –cluster-replicas 1 -a 123456</p>\n<p>   参数说明<br>   redis-cli 客户端工具<br>   –cluster create 创建一个新的集群<br>   –cluster-replicas 1 每一个主库对应一个从库<br>   -a 数据库密码</p>\n<p>   出现下面的字样说明创建成功</p>\n<p>   [OK] All nodes agree about slots configuration.</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>Check for open slots…<br>Check slots coverage…<br>[OK] All 16384 slots covered.<br>1<br>2<br>3<br>4<br>登陆验证</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<p>   redis-cli -c -p 端口<br>   auth 密码</p>\n<p>   删除主节点<br>   redis-cli –cluster reshard 110.110.100.35:6379</p>\n<p>   到这里就搭建完成了</p>\n<p>   搭建过程中有的问题也有记录在异常处理</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup redis-server &#x2F;opt&#x2F;redis&#x2F;etc&#x2F;redis.conf &amp;</span><br></pre></td></tr></table></figure>\n\n\n\n<table>\n<thead>\n<tr>\n<th>测试端redis6,被测redis5</th>\n<th>单台</th>\n<th>集群</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>redis-benchmark -h 172.20.59.57 -p 6379 –threads 500 -t get -d 500 -c 500 -n 10000000</td>\n<td>137794.19 requests per second</td>\n<td></td>\n</tr>\n<tr>\n<td>redis-benchmark -h 172.20.59.57 -p 6379 –threads 500 -t set -d 500 -c 500 -n 10000000</td>\n<td>132383.70 requests per second</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<table>\n<thead>\n<tr>\n<th>测试端redis5,被测redis5</th>\n<th>单台</th>\n<th>集群</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>redis-benchmark -h 172.20.59.57 -p 6379  -t get -d 500 -c 500 -n 10000000</td>\n<td>84317.03 requests per second</td>\n<td></td>\n</tr>\n<tr>\n<td>redis-benchmark -h 172.20.59.57 -p 6379  -t set -d 500 -c 500 -n 10000000</td>\n<td>98796.66 requests per second</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<table>\n<thead>\n<tr>\n<th>测试端redis6,被测redis5 物理机</th>\n<th>单台</th>\n<th>集群</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>redis-benchmark -h 172.20.1.30 -p 6379  -t get -d 500 -c 500 -n 10000000</td>\n<td>106834.19 requests per second</td>\n<td></td>\n</tr>\n<tr>\n<td>redis-benchmark -h 172.20.1.30 -p 6379  -t set -d 500 -c 500 -n 10000000</td>\n<td>113291.34 requests per second</td>\n<td></td>\n</tr>\n<tr>\n<td>redis-benchmark -h 172.20.1.30 -p 6379 –threads 500 -t set -d 500 -c 500 -n 10000000</td>\n<td>163041.70 requests per second</td>\n<td></td>\n</tr>\n<tr>\n<td>redis-benchmark -h 172.20.1.30 -p 6379 –threads 500 -t get -d 500 -c 500 -n 10000000</td>\n<td>169396.78 requests per second</td>\n<td></td>\n</tr>\n</tbody></table>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>set(requests per second)</th>\n<th>get(requests per second)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>物理机（redis5）+测试机（redis6+threads 500）</td>\n<td>163041.70</td>\n<td>169396.78</td>\n</tr>\n<tr>\n<td>物理机（redis5）+测试机（redis6+threads）</td>\n<td>113291.34</td>\n<td>106834.19</td>\n</tr>\n<tr>\n<td>云主机8c8g（redis5）+测试机（redis6+threads 500）</td>\n<td>132383.70</td>\n<td>137794.19</td>\n</tr>\n<tr>\n<td>云主机8c8g（redis5）+测试机（redis6）</td>\n<td>109325.46</td>\n<td>110688.03</td>\n</tr>\n<tr>\n<td>云主机8c8g（redis5）+测试机（redis5）</td>\n<td>98796.66</td>\n<td>84317.03</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">redis-cli --cluster create 172.20.59.83:6379 172.20.59.119:6379 172.20.59.54:6379 172.20.59.59:6379 172.20.59.99:6379 172.20.59.52:6379 --cluster-replicas 1 -a 123456</span><br></pre></td></tr></table></figure>\n\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"应用","path":"api/tags/应用.json"}]},{"title":"cmd执行命令卡住了","slug":"systemstructure/windows/batblock","date":"2020-10-18T15:20:21.000Z","updated":"2024-06-30T10:35:56.308Z","comments":true,"path":"api/articles/systemstructure/windows/batblock.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635172010R-C.1295498867d0a14529a15c280d612bf9?rik=tk4p6tmyea33JQ&riu=http%3a%2f%2fzfnb-leiting.oss-cn-beijing.aliyuncs.com%2fmvcroyyj52fcso-2.jpg&ehk=7NXbedYaErtmiwW183CSf2pvdxRWGQhRdnb2jTa1e5o%3d&risl=&pid=ImgRaw&r=0","content":"<p><strong>windows cmd-&gt;属性-&gt;选项-&gt;编辑选项</strong></p>\n<p><strong>取消 快速编辑模式</strong></p>\n<p>cmd默认开启了“快速编辑模式”，只要当鼠标点击cmd任何区域时，就自动进入了编辑模式，之后的程序向控制台输入内容甚至后台的程序都会被阻塞。</p>\n<p>我们在控制台里面回车或者右键鼠标后，自动退出了编辑模式。因此，控制又恢复输出内容，服务端又正常了。</p>\n<p>选择快速编辑模式的时候,鼠标不小心点到cmd某个位置,都可能让正在运行的进程都卡住，直到按下回车后，会跳出一堆。</p>\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"编程原理","path":"api/tags/编程原理.json"},{"name":"windows","path":"api/tags/windows.json"}]}]}