{"name":"工具","postlist":[{"title":"HAProxy负载均衡器","slug":"tools/loadbanlance","date":"2020-03-11T11:30:41.000Z","updated":"2024-06-30T10:35:56.312Z","comments":true,"path":"api/articles/tools/loadbanlance.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635176781server-large.png","content":"<h2 id=\"LB简介\"><a href=\"#LB简介\" class=\"headerlink\" title=\"LB简介\"></a>LB简介</h2><h2 id=\"HAProxy是什么\"><a href=\"#HAProxy是什么\" class=\"headerlink\" title=\"HAProxy是什么\"></a>HAProxy是什么</h2><p>HAProxy是一个免费的负载均衡软件，可以运行于大部分主流的Linux操作系统上。</p>\n<p>HAProxy提供了L4(TCP)和L7(HTTP)两种负载均衡能力，具备丰富的功能。HAProxy的社区非常活跃，版本更新快速（最新稳定版1.7.2于2017/01/13推出）。最关键的是，HAProxy具备媲美商用负载均衡器的性能和稳定性。</p>\n<p>因为HAProxy的上述优点，它当前不仅仅是免费负载均衡软件的首选，更几乎成为了唯一选择。（还有gobetween）</p>\n<h3 id=\"HAProxy的核心功能\"><a href=\"#HAProxy的核心功能\" class=\"headerlink\" title=\"HAProxy的核心功能\"></a>HAProxy的核心功能</h3><ul>\n<li>负载均衡：L4和L7两种模式，支持RR/静态RR/LC/IP Hash/URI Hash/URL_PARAM Hash/HTTP_HEADER Hash等丰富的负载均衡算法</li>\n<li>健康检查：支持TCP和HTTP两种健康检查模式</li>\n<li>会话保持：对于未实现会话共享的应用集群，可通过Insert Cookie/Rewrite Cookie/Prefix Cookie，以及上述的多种Hash方式实现会话保持</li>\n<li>SSL：HAProxy可以解析HTTPS协议，并能够将请求解密为HTTP后向后端传输</li>\n<li>HTTP请求重写与重定向</li>\n<li>监控与统计：HAProxy提供了基于Web的统计信息页面，展现健康状态和流量数据。基于此功能，使用者可以开发监控程序来监控HAProxy的状态</li>\n</ul>\n<p><strong>稳定性</strong></p>\n<p>作为建议以单进程模式运行的程序，HAProxy对稳定性的要求是十分严苛的。按照作者的说法，HAProxy在13年间从未出现过一个会导致其崩溃的BUG，HAProxy一旦成功启动，除非操作系统或硬件故障，否则就不会崩溃（我觉得可能多少还是有夸大的成分）。</p>\n<p>在上文中提到过，HAProxy的大部分工作都是在操作系统内核完成的，所以HAProxy的稳定性主要依赖于操作系统，作者建议使用2.6或3.x的Linux内核，对sysctls参数进行精细的优化，并且确保主机有足够的内存。这样HAProxy就能够持续满负载稳定运行数年之久。</p>\n<p>个人的建议：</p>\n<ul>\n<li>使用3.x内核的Linux操作系统运行HAProxy</li>\n<li>运行HAProxy的主机上不要部署其他的应用，确保HAProxy独占资源，同时避免其他应用引发操作系统或主机的故障</li>\n<li>至少为HAProxy配备一台备机，以应对主机硬件故障、断电等突发情况（搭建双活HAProxy的方法在后文中有描述）</li>\n<li>sysctl的建议配置（并不是万用配置，仍然需要针对具体情况进行更精细的调整，但可以作为首次使用HAProxy的初始配置使用）：</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net.ipv4.tcp_tw_reuse = 1</span><br><span class=\"line\">net.ipv4.ip_local_port_range = 1024 65023</span><br><span class=\"line\">net.ipv4.tcp_max_syn_backlog = 10240</span><br><span class=\"line\">net.ipv4.tcp_max_tw_buckets = 400000</span><br><span class=\"line\">net.ipv4.tcp_max_orphans = 60000</span><br><span class=\"line\">net.ipv4.tcp_synack_retries = 3</span><br><span class=\"line\">net.core.somaxconn = 10000</span><br></pre></td></tr></table></figure>","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"工具","path":"api/tags/工具.json"}]},{"title":"Ubuntu安装mysql server","slug":"tools/mysql","date":"2020-01-28T09:20:21.000Z","updated":"2024-06-30T10:35:56.312Z","comments":true,"path":"api/articles/tools/mysql.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635176823R-C.fe03dc72e4b942345afbfec1ad4719e2?rik=ZercdU4lqfV5YA&riu=http%3a%2f%2fsolocodigoweb.com%2fwp-content%2fuploads%2f2014%2f03%2fcronologia-historia-de-mysql-cloud-computing-solocodigoweb.jpg&ehk=wM%2fFWEd31OnMe54%2bioNmlOZv7Jh%2bssZi%2f1oDQHx3bXE%3d&risl=&pid=ImgRaw&r=0","content":"<ol>\n<li><p>sudo apt-get install mysql-server -y</p>\n</li>\n<li><p>初始化配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">ubuntu@VM-0-11-ubuntu:~$ sudo mysql_secure_installation</span><br><span class=\"line\"></span><br><span class=\"line\">Securing the MySQL server deployment.</span><br><span class=\"line\"></span><br><span class=\"line\">Connecting to MySQL using a blank password.</span><br><span class=\"line\"></span><br><span class=\"line\">VALIDATE PASSWORD PLUGIN can be used to test passwords</span><br><span class=\"line\">and improve security. It checks the strength of password</span><br><span class=\"line\">and allows the users to set only those passwords which are</span><br><span class=\"line\">secure enough. Would you like to setup VALIDATE PASSWORD plugin?</span><br><span class=\"line\"></span><br><span class=\"line\">Press y|Y for Yes, any other key for No: N</span><br><span class=\"line\">Please set the password for root here.</span><br><span class=\"line\"></span><br><span class=\"line\">New password:</span><br><span class=\"line\"></span><br><span class=\"line\">Re-enter new password:</span><br><span class=\"line\">By default, a MySQL installation has an anonymous user,</span><br><span class=\"line\">allowing anyone to log into MySQL without having to have</span><br><span class=\"line\">a user account created for them. This is intended only for</span><br><span class=\"line\">testing, and to make the installation go a bit smoother.</span><br><span class=\"line\">You should remove them before moving into a production</span><br><span class=\"line\">environment.</span><br><span class=\"line\"></span><br><span class=\"line\">Remove anonymous users? (Press y|Y for Yes, any other key for No) : N</span><br><span class=\"line\"></span><br><span class=\"line\"> ... skipping.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Normally, root should only be allowed to connect from</span><br><span class=\"line\">&#x27;localhost&#x27;. This ensures that someone cannot guess at</span><br><span class=\"line\">the root password from the network.</span><br><span class=\"line\"></span><br><span class=\"line\">Disallow root login remotely? (Press y|Y for Yes, any other key for No) : N</span><br><span class=\"line\"></span><br><span class=\"line\"> ... skipping.</span><br><span class=\"line\">By default, MySQL comes with a database named &#x27;test&#x27; that</span><br><span class=\"line\">anyone can access. This is also intended only for testing,</span><br><span class=\"line\">and should be removed before moving into a production</span><br><span class=\"line\">environment.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Remove test database and access to it? (Press y|Y for Yes, any other key for No) : N</span><br><span class=\"line\"></span><br><span class=\"line\"> ... skipping.</span><br><span class=\"line\">Reloading the privilege tables will ensure that all changes</span><br><span class=\"line\">made so far will take effect immediately.</span><br><span class=\"line\"></span><br><span class=\"line\">Reload privilege tables now? (Press y|Y for Yes, any other key for No) : Y</span><br><span class=\"line\">Success.</span><br><span class=\"line\"></span><br><span class=\"line\">All done!</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n</ol>\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"工具","path":"api/tags/工具.json"}]},{"title":"swingbench介绍","slug":"tools/swingbench","date":"2021-02-12T15:20:21.000Z","updated":"2024-06-30T10:35:56.312Z","comments":true,"path":"api/articles/tools/swingbench.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635177524m0k5joh3q8it2uq0ftnle6hlg8c94gcbj12on46vg99vrlv98juah9rmfgem3q3.1200-0-90.jpg","content":"<p>Swingbench is a free load generator (and benchmarks) designed to stress test an Oracle database (10g,11g,12c).</p>\n<h1 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h1><ul>\n<li>Swingbench组件：<br>  Swingbench是一个图形界面，用户可以编辑配置参数。可以显示实时的图形。<br>  Minibench是一个图形界面，可以显示简单的实时图形。<br>  Charbench是一个命令行的工具，有很多的命令行选项。</li>\n<li>  四种基准测试</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Benchmark</th>\n<th align=\"left\">描述</th>\n<th align=\"left\">读写比例</th>\n<th align=\"left\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Order Entry</td>\n<td align=\"left\">经典的Order Entry基准测试。像TPC。</td>\n<td align=\"left\">60/40</td>\n<td align=\"left\">TPC-C类似的，基于Oracle自带的两个Sample Schema：OE和SH</td>\n</tr>\n<tr>\n<td align=\"left\">Calling Circle</td>\n<td align=\"left\">电话公司自助系统</td>\n<td align=\"left\">70/30</td>\n<td align=\"left\">基于电话自助服务系统的基准测试，大小相对固定，每次运行都需要重新生成schema</td>\n</tr>\n<tr>\n<td align=\"left\">Stess Test</td>\n<td align=\"left\">简单的INSERT/DELETE/UPDATE/SELECT</td>\n<td align=\"left\">50/50</td>\n<td align=\"left\">Stress Test是最简单的测试，执行insert/update/delete/select的操作，数据是在运行时产生，可以用于测试TimesTen</td>\n</tr>\n<tr>\n<td align=\"left\">Sales History</td>\n<td align=\"left\">DSS基准测试</td>\n<td align=\"left\">100/0</td>\n<td align=\"left\">数据仓库基准测试，使用datagenerator产生数据，由disk和时间来决定最大的大小，基于Oracle自带的两个Sample Schema：OE和SH</td>\n</tr>\n</tbody></table>\n<h1 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h1><ul>\n<li>  Linux</li>\n<li>  Oracle Database 11</li>\n</ul>\n<h1 id=\"架构示意图\"><a href=\"#架构示意图\" class=\"headerlink\" title=\"架构示意图\"></a>架构示意图</h1><p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/22/89110108255106186165209123221526149212127123_6500656c-5aef-11eb-9fab-fa1e86d74c00.png\" alt=\"img\"></p>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/22/505624220682411041642202111351681361168348_665819b4-5aef-11eb-9549-fa1e86d74c00.png\" alt=\"img\"></p>\n<h1 id=\"安装和设置\"><a href=\"#安装和设置\" class=\"headerlink\" title=\"安装和设置\"></a>安装和设置</h1><ul>\n<li><p>下载<br>  目前作者已经发布了最新的2.5版本，本次使用2.5。从dominicgiles.com下载，地址：<a href=\"http://dominicgiles.com/downloads.html%E3%80%82\">http://dominicgiles.com/downloads.html。</a></p>\n</li>\n<li><p>验证Java版本<br>  2.4和2.5版本需要使用Java 6/7 JVM。</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#</span><br><span class=\"line\">yum install -y java-1.7.0-openjdk.x86_64</span><br><span class=\"line\">$</span><br><span class=\"line\">java -version</span><br><span class=\"line\">java version &quot;1.7.0_65&quot;</span><br></pre></td></tr></table></figure></li>\n<li><p>安装</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">pwd &#x2F;home&#x2F;oracle</span><br><span class=\"line\">unzip swingbench25932.zip</span><br><span class=\"line\">&lt;略&gt;</span><br><span class=\"line\">cd swingbench</span><br><span class=\"line\">pwd</span><br><span class=\"line\">&#x2F;home&#x2F;oracle&#x2F;swingbench</span><br></pre></td></tr></table></figure></li>\n<li><p>用户设置<br>  Unix/Linux平台配置文件为swingbench.env，执行文件路径为bin；Windows下则为swingbenchenv.bat和winbin。在windows平台上注意一定要配置ORACLE_HOME，好像不认注册表。<br>  Linux平台下，swingbench是在Oracle用户下执行，请确保它被设置在环境变量以下。</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">export ORACLE_BASE&#x3D;&#x2F;u01&#x2F;app&#x2F;oracle</span><br><span class=\"line\">export ORACLE_HOME&#x3D;$ORACLE_BASE&#x2F;product&#x2F;11.2.0&#x2F;dbhome_1</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h1><ul>\n<li><p>配置OE仓库</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">cd bin</span><br><span class=\"line\">.&#x2F;oewizard</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>1.按在欢迎屏幕[下一页]</p>\n<p>2.选择Benchmark版本，此处选择版本2.0，然后按[下一页]</p>\n<p>3.选择任务，选择“Create the Order Entry Schema（User,Tables,indexes,Data etc）”，然后按[下一页]</p>\n<p>4.在数据库的详细信息界面，输入必要的信息，然后按[下一页]</p>\n<p>5.在Schema Details界面输入所需信息，然后按[下一页]</p>\n<p>6.在Database Options输入所需的信息，然后按[下一页]<br>可默认</p>\n<p>7.大小细节，建议进入用户自定义，可以使用1GB按[下一步]。</p>\n<p>8.最后，指定并行度，然后按[完成]</p>\n<p>9.日志在一个单独的窗口中打开。</p>\n<p>10.打开完成后的模式创建完成界面。并按[确定]退出。</p>\n<ul>\n<li><p>测试</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">cd &#x2F;home&#x2F;oracle&#x2F;swingbench&#x2F;bin</span><br><span class=\"line\">.&#x2F;swingbench -cs &#x2F;&#x2F;oracledb01&#x2F;orcl112 -dt thin  -rt 0:05</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"测试中遇到的问题和解决方法\"><a href=\"#测试中遇到的问题和解决方法\" class=\"headerlink\" title=\"测试中遇到的问题和解决方法\"></a>测试中遇到的问题和解决方法</h1><ol>\n<li><p>生成AWR<br> 在测试开始时可以生成awr快照，但是结束时没有自动生成awr快照。可以运行下列<br> 语句手工生成：</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt;</span><br><span class=\"line\">exec DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT ;</span><br></pre></td></tr></table></figure></li>\n<li><p>遇到等待事件<br> resmgr:cpu quantum<br> 根据metalink的note禁止资源管理</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt;</span><br><span class=\"line\">alter system set resource_manager_plan&#x3D;&#39;&#39; scope&#x3D;both;</span><br></pre></td></tr></table></figure></li>\n<li><p>运行swingbench, 没有显示cpu和disk的实时图形<br> ./swingbench -cpuloc localhost 带选项-cpuloc，如果是2.4版本，可以指定hostname和用户密码</p>\n</li>\n<li><p>遇到ora-03111错误<br> 查了metalink的note可以通过调节sdu来解决，不过有时还是会出现。<br> (SDU = 16384)<br> (TDU = 16384)</p>\n</li>\n</ol>\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"工具","path":"api/tags/工具.json"}]},{"title":"sysprep","slug":"tools/sysprep","date":"2019-10-24T13:11:19.000Z","updated":"2024-06-30T10:35:56.312Z","comments":true,"path":"api/articles/tools/sysprep.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211026/1635177611R-C.cdb93bd02539a0afa1825bc392fdd063?rik=8V%2fE5FrphN%2fTUw&riu=http%3a%2f%2fimg.lszhang.com%2f2020%2f11%2fWIP-6th-anniversary-wallpaper-dark-scaled.jpg&ehk=yPsRXHZtQY4Q3ATUyhBqgtFSCtcbT3WcHoofri16xPc%3d&risl=&pid=ImgRaw&r=0","content":"<p>Sysprep程序是微软公司用来配置Microsoft Windows全新安装的一个工具，是为方便企业用户部署系统而设计的。</p>\n<h2 id=\"Sysprep使用\"><a href=\"#Sysprep使用\" class=\"headerlink\" title=\"Sysprep使用\"></a>Sysprep使用</h2><p>1、程序位置为：“C:\\Windows\\System32\\sysprep\\sysprep.exe”，也可以通过运行“sysprep”，打开sysprep.exe封装工具。<br><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635177540image_thumb-18.png\" alt=\"image\"><br><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635177545image_thumb-19.png\" alt=\"image\"><br><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635177553image_thumb-20.png\" alt=\"image\"></p>\n<p>2、运行sysprep.exe封装工具，打开后点击确定就可以进行封装。<br>如果勾选“通用”的话有什么作用？<br>如果勾选“通用”在初始化系统的时候后会多一个硬件和驱动重新识别和安装的过程。<br>一般是跨硬件进行操作系统迁移的时候才会勾选该按钮，就是让这次封装的系统能在其它不同硬件的计算机上运行。</p>\n<p>关机选项可以根据我们需求进行配置，如果设置为重新启动，封装完成后会自动进行重启。<br><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635177563image_thumb-21.png\" alt=\"image\"><br><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211025/1635177558image_thumb-22.png\" alt=\"image\"></p>\n<p>封装完成后就可以看到 欢迎界面了。</p>\n<p>封装完成后你的操作系统配置与数据是不丢失的，包括windows激活与防火墙配置等。</p>\n<h2 id=\"为什么要使用Sysprep作用\"><a href=\"#为什么要使用Sysprep作用\" class=\"headerlink\" title=\"为什么要使用Sysprep作用\"></a>为什么要使用Sysprep作用</h2><p>微软的操作系统很早就开始使用安全标识符（SID）对计算机和用户进行识别。在域控环境中，分配给计算机账号的叫 Machine SID，分配给用户账户的是用户账户 SID。处于工作组计算机的 SID 是由算法生成的，除特殊账户外，其它用户的 SID 也是由算法生成的；而域中各对象的 SID 是由域范围的 SID 和具有唯一性的相对标识符 (RID) 连接组成，RID 是在创建安全主体时由域中的 RID Master 分配的。RID Master 的作用是：分配可用 RID 池给域内的 DC 以及防止对象的 SID 重复。</p>\n<p>所以当你从一台主机克隆出多个 PC，或者使用同一虚拟机母板克隆出多台 VM 之后，其 SID 势必会相同，在加入域时会造成安全主体的识别混乱和加域失败等，通过Sysprep封装就可以解决该问题。</p>\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"工具","path":"api/tags/工具.json"}]},{"title":"vdbench的使用","slug":"tools/vdbench","date":"2021-03-16T15:21:21.000Z","updated":"2024-06-30T10:35:56.312Z","comments":true,"path":"api/articles/tools/vdbench.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211026/16351778984ff67260bec777fbef81d387df6f7416.jpeg","content":"<p>ssh免密配置</p>\n<p>参考：<a href=\"https://blog.csdn.net/SweeNeil/article/details/95338293\">https://blog.csdn.net/SweeNeil/article/details/95338293</a></p>\n<ol>\n<li> 使用Vdbench测试工具对所有虚拟机磁盘进行压力测试，vdbench测试工具脚本主机定义设置如下：</li>\n</ol>\n<p>hd=default,vdbench=/home/vdbench,user=root,shell=ssh</p>\n<p>hd=hd1,system=node1</p>\n<p>hd=hd2,system=node2</p>\n<p>hd=hd3,system=node3</p>\n<p>……</p>\n<ol>\n<li> 设置测试工具模型为8k块大小随机读，测试数据量为块存储总SSD缓存大小的1倍。在压力虚拟机上运行Vdbench测试工具。存储定义、工作负载定义、运行定义设置如下：</li>\n</ol>\n<p>sd=sd1,hd=hd1,lun=/dev/sdb,openflags=o_direct,hitarea=1G,threads=1（厂家自行调整）</p>\n<p>……</p>\n<p>wd=wd1,sd=sd*,seekpct=100,rdpct=100,rhpct=60,xfersize=8k </p>\n<p>rd=rd1,wd=wd1,iorate=max,elapsed=604800,maxdata=数据量,interval=5,warmup=30</p>\n<ol>\n<li> 记录平均读写IOPS</li>\n</ol>\n<p>master</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br><span class=\"line\">ssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub root@172.18.2.197</span><br><span class=\"line\">ssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub root@172.18.2.196</span><br><span class=\"line\">ssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub root@172.18.2.185</span><br><span class=\"line\">ssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub root@172.18.2.173</span><br><span class=\"line\">ssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub root@172.18.2.171</span><br><span class=\"line\">ssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub root@172.18.2.165</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hd&#x3D;default,vdbench&#x3D;&#x2F;home&#x2F;vdbench,user&#x3D;root,shell&#x3D;ssh</span><br><span class=\"line\">hd&#x3D;hd1,system&#x3D;172.18.2.197</span><br><span class=\"line\">hd&#x3D;hd2,system&#x3D;172.18.2.196</span><br><span class=\"line\">hd&#x3D;hd3,system&#x3D;172.18.2.185</span><br><span class=\"line\">hd&#x3D;hd4,system&#x3D;172.18.2.173</span><br><span class=\"line\">hd&#x3D;hd5,system&#x3D;172.18.2.171</span><br><span class=\"line\">hd&#x3D;hd6,system&#x3D;172.18.2.165</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">sd&#x3D;sd1,hd&#x3D;hd1,lun&#x3D;&#x2F;dev&#x2F;sda,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd2,hd&#x3D;hd1,lun&#x3D;&#x2F;dev&#x2F;sdb,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd3,hd&#x3D;hd2,lun&#x3D;&#x2F;dev&#x2F;sda,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd4,hd&#x3D;hd2,lun&#x3D;&#x2F;dev&#x2F;sdb,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd5,hd&#x3D;hd3,lun&#x3D;&#x2F;dev&#x2F;sda,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd6,hd&#x3D;hd3,lun&#x3D;&#x2F;dev&#x2F;sdb,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd7,hd&#x3D;hd4,lun&#x3D;&#x2F;dev&#x2F;sda,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd8,hd&#x3D;hd4,lun&#x3D;&#x2F;dev&#x2F;sdb,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd9,hd&#x3D;hd5,lun&#x3D;&#x2F;dev&#x2F;sdb,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd10,hd&#x3D;h5,lun&#x3D;&#x2F;dev&#x2F;sda,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd11,hd&#x3D;hd6,lun&#x3D;&#x2F;dev&#x2F;sdb,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\">sd&#x3D;sd12,hd&#x3D;hd6,lun&#x3D;&#x2F;dev&#x2F;sda,openflags&#x3D;o_direct,hitarea&#x3D;1G,threads&#x3D;1</span><br><span class=\"line\"></span><br><span class=\"line\">wd&#x3D;wd1,sd&#x3D;sd*,seekpct&#x3D;100,rdpct&#x3D;0,rhpct&#x3D;60,xfersize&#x3D;8k</span><br><span class=\"line\"></span><br><span class=\"line\">rd&#x3D;rd1,wd&#x3D;wd1,iorate&#x3D;max,elapsed&#x3D;604800,maxdata&#x3D;150G,interval&#x3D;5,warmup&#x3D;30</span><br></pre></td></tr></table></figure>\n\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"工具","path":"api/tags/工具.json"}]},{"title":"vscode代码高亮设置","slug":"tools/vscodeset","date":"2019-10-08T13:20:21.000Z","updated":"2024-06-30T10:35:56.312Z","comments":true,"path":"api/articles/tools/vscodeset.json","excerpt":null,"keywords":"云计算","cover":"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211026/1635177963vscode.jpg","content":"<ol>\n<li> 打开File&gt;Preferences-&gt;settings</li>\n<li> 找到workbench.colorCustomizations</li>\n<li> 修改setting.json</li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;editor.renderLineHighlight&quot;</span>: <span class=\"string\">&quot;all&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;workbench.colorCustomizations&quot;</span>:&#123;</span><br><span class=\"line\">        <span class=\"attr\">&quot;editor.selectionHighlightBackground&quot;</span>: <span class=\"string\">&quot;#9805ec&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;editor.lineHighlightBorder&quot;</span>: <span class=\"string\">&quot;#ff0000&quot;</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","raw":null,"categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"工具","path":"api/tags/工具.json"}]}]}