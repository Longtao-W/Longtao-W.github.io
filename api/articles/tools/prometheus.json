{"title":"prometheus的使用","slug":"tools/prometheus","date":"2021-11-20T12:20:21.000Z","updated":"2024-06-30T10:35:56.312Z","comments":true,"path":"api/articles/tools/prometheus.json","excerpt":null,"covers":["https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211122/1637544429v2-0ff3a54dfa1284f61e124405dd25c9aa_1440w.jpg","https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211122/16375453951.svg"],"content":"<p>普罗米修斯(Prometheus)是一个SoundCloud公司开源的基于GO的监控系统，作者 Matt T.Proud 在2012年加入SoundCloud开发，2015年正式发布。</p>\n<p>prometheus架构如下</p>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211122/1637544429v2-0ff3a54dfa1284f61e124405dd25c9aa_1440w.jpg\" alt=\"img\"></p>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211122/16375453951.svg\" alt=\"1\"></p>\n<p>其中</p>\n<h3 id=\"Prometheus-Server\"><a href=\"#Prometheus-Server\" class=\"headerlink\" title=\"Prometheus Server\"></a>Prometheus Server</h3><p>用数据的采集和存储，PromQL查询，报警配置</p>\n<ol>\n<li>Retrieval</li>\n<li>TSDB</li>\n<li>HTTP server</li>\n</ol>\n<h4 id=\"Push-gateway\"><a href=\"#Push-gateway\" class=\"headerlink\" title=\"Push gateway\"></a>Push gateway</h4><p>用于批量，短期的监控数据的汇报总节点。</p>\n<h4 id=\"Exporters\"><a href=\"#Exporters\" class=\"headerlink\" title=\"Exporters\"></a>Exporters</h4><p>各种汇报数据的exporter，例如汇报机器数据的node_exporter，汇报MondogDB</p>\n<h4 id=\"Alertmanager\"><a href=\"#Alertmanager\" class=\"headerlink\" title=\"Alertmanager\"></a>Alertmanager</h4><p>用于高级通知管理</p>\n<h3 id=\"采集数据\"><a href=\"#采集数据\" class=\"headerlink\" title=\"采集数据\"></a>采集数据</h3><p>若要采集目标的监控数据(主机或服务)，需要在目标上安装采集组件(Exporter)，Exporter能采集目标监控数据，然后传输给Prometheus，Exporter会暴露一个http接口，Prometheus通过Pull周期性拉去数据，Prometheus 也提供push传输数据，可以将数据push到Push gateway, Prometheus 再通过Pull从Push Gateway拿数据</p>\n<h4 id=\"采集流程\"><a href=\"#采集流程\" class=\"headerlink\" title=\"采集流程\"></a>采集流程</h4><ol>\n<li>Prometheus server</li>\n</ol>\n","more":"<p>普罗米修斯(Prometheus)是一个SoundCloud公司开源的基于GO的监控系统，作者 Matt T.Proud 在2012年加入SoundCloud开发，2015年正式发布。</p>\n<p>prometheus架构如下</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211122/1637544429v2-0ff3a54dfa1284f61e124405dd25c9aa_1440w.jpg\" alt=\"img\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/20211122/16375453951.svg\" alt=\"1\"></p>\n<p>其中</p>\n<h3 id=\"Prometheus-Server\"><a href=\"#Prometheus-Server\" class=\"headerlink\" title=\"Prometheus Server\"></a>Prometheus Server</h3><p>用数据的采集和存储，PromQL查询，报警配置</p>\n<ol>\n<li>Retrieval</li>\n<li>TSDB</li>\n<li>HTTP server</li>\n</ol>\n<h4 id=\"Push-gateway\"><a href=\"#Push-gateway\" class=\"headerlink\" title=\"Push gateway\"></a>Push gateway</h4><p>用于批量，短期的监控数据的汇报总节点。</p>\n<h4 id=\"Exporters\"><a href=\"#Exporters\" class=\"headerlink\" title=\"Exporters\"></a>Exporters</h4><p>各种汇报数据的exporter，例如汇报机器数据的node_exporter，汇报MondogDB</p>\n<h4 id=\"Alertmanager\"><a href=\"#Alertmanager\" class=\"headerlink\" title=\"Alertmanager\"></a>Alertmanager</h4><p>用于高级通知管理</p>\n<h3 id=\"采集数据\"><a href=\"#采集数据\" class=\"headerlink\" title=\"采集数据\"></a>采集数据</h3><p>若要采集目标的监控数据(主机或服务)，需要在目标上安装采集组件(Exporter)，Exporter能采集目标监控数据，然后传输给Prometheus，Exporter会暴露一个http接口，Prometheus通过Pull周期性拉去数据，Prometheus 也提供push传输数据，可以将数据push到Push gateway, Prometheus 再通过Pull从Push Gateway拿数据</p>\n<h4 id=\"采集流程\"><a href=\"#采集流程\" class=\"headerlink\" title=\"采集流程\"></a>采集流程</h4><ol>\n<li>Prometheus server</li>\n</ol>\n","categories":[{"name":"tool","path":"api/categories/tool.json"}],"tags":[{"name":"tool","path":"api/tags/tool.json"}]}