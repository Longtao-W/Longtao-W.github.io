{"title":"swingbench介绍","slug":"tools/swingbench","date":"2021-02-12T15:20:21.000Z","updated":"2024-06-30T10:35:56.312Z","comments":true,"path":"api/articles/tools/swingbench.json","excerpt":null,"covers":["https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/22/89110108255106186165209123221526149212127123_6500656c-5aef-11eb-9fab-fa1e86d74c00.png","https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/22/505624220682411041642202111351681361168348_665819b4-5aef-11eb-9549-fa1e86d74c00.png"],"content":"<p>Swingbench is a free load generator (and benchmarks) designed to stress test an Oracle database (10g,11g,12c).</p>\n<h1 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h1><ul>\n<li>Swingbench组件：<br>  Swingbench是一个图形界面，用户可以编辑配置参数。可以显示实时的图形。<br>  Minibench是一个图形界面，可以显示简单的实时图形。<br>  Charbench是一个命令行的工具，有很多的命令行选项。</li>\n<li>  四种基准测试</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Benchmark</th>\n<th align=\"left\">描述</th>\n<th align=\"left\">读写比例</th>\n<th align=\"left\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Order Entry</td>\n<td align=\"left\">经典的Order Entry基准测试。像TPC。</td>\n<td align=\"left\">60/40</td>\n<td align=\"left\">TPC-C类似的，基于Oracle自带的两个Sample Schema：OE和SH</td>\n</tr>\n<tr>\n<td align=\"left\">Calling Circle</td>\n<td align=\"left\">电话公司自助系统</td>\n<td align=\"left\">70/30</td>\n<td align=\"left\">基于电话自助服务系统的基准测试，大小相对固定，每次运行都需要重新生成schema</td>\n</tr>\n<tr>\n<td align=\"left\">Stess Test</td>\n<td align=\"left\">简单的INSERT/DELETE/UPDATE/SELECT</td>\n<td align=\"left\">50/50</td>\n<td align=\"left\">Stress Test是最简单的测试，执行insert/update/delete/select的操作，数据是在运行时产生，可以用于测试TimesTen</td>\n</tr>\n<tr>\n<td align=\"left\">Sales History</td>\n<td align=\"left\">DSS基准测试</td>\n<td align=\"left\">100/0</td>\n<td align=\"left\">数据仓库基准测试，使用datagenerator产生数据，由disk和时间来决定最大的大小，基于Oracle自带的两个Sample Schema：OE和SH</td>\n</tr>\n</tbody></table>\n<h1 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h1><ul>\n<li>  Linux</li>\n<li>  Oracle Database 11</li>\n</ul>\n<h1 id=\"架构示意图\"><a href=\"#架构示意图\" class=\"headerlink\" title=\"架构示意图\"></a>架构示意图</h1><p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/22/89110108255106186165209123221526149212127123_6500656c-5aef-11eb-9fab-fa1e86d74c00.png\" alt=\"img\"></p>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/22/505624220682411041642202111351681361168348_665819b4-5aef-11eb-9549-fa1e86d74c00.png\" alt=\"img\"></p>\n<h1 id=\"安装和设置\"><a href=\"#安装和设置\" class=\"headerlink\" title=\"安装和设置\"></a>安装和设置</h1><ul>\n<li><p>下载<br>  目前作者已经发布了最新的2.5版本，本次使用2.5。从dominicgiles.com下载，地址：<a href=\"http://dominicgiles.com/downloads.html%E3%80%82\">http://dominicgiles.com/downloads.html。</a></p>\n</li>\n<li><p>验证Java版本<br>  2.4和2.5版本需要使用Java 6/7 JVM。</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#</span><br><span class=\"line\">yum install -y java-1.7.0-openjdk.x86_64</span><br><span class=\"line\">$</span><br><span class=\"line\">java -version</span><br><span class=\"line\">java version &quot;1.7.0_65&quot;</span><br></pre></td></tr></table></figure></li>\n<li><p>安装</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">pwd &#x2F;home&#x2F;oracle</span><br><span class=\"line\">unzip swingbench25932.zip</span><br><span class=\"line\">&lt;略&gt;</span><br><span class=\"line\">cd swingbench</span><br><span class=\"line\">pwd</span><br><span class=\"line\">&#x2F;home&#x2F;oracle&#x2F;swingbench</span><br></pre></td></tr></table></figure></li>\n<li><p>用户设置<br>  Unix/Linux平台配置文件为swingbench.env，执行文件路径为bin；Windows下则为swingbenchenv.bat和winbin。在windows平台上注意一定要配置ORACLE_HOME，好像不认注册表。<br>  Linux平台下，swingbench是在Oracle用户下执行，请确保它被设置在环境变量以下。</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">export ORACLE_BASE&#x3D;&#x2F;u01&#x2F;app&#x2F;oracle</span><br><span class=\"line\">export ORACLE_HOME&#x3D;$ORACLE_BASE&#x2F;product&#x2F;11.2.0&#x2F;dbhome_1</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h1><ul>\n<li><p>配置OE仓库</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">cd bin</span><br><span class=\"line\">.&#x2F;oewizard</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>1.按在欢迎屏幕[下一页]</p>\n<p>2.选择Benchmark版本，此处选择版本2.0，然后按[下一页]</p>\n<p>3.选择任务，选择“Create the Order Entry Schema（User,Tables,indexes,Data etc）”，然后按[下一页]</p>\n<p>4.在数据库的详细信息界面，输入必要的信息，然后按[下一页]</p>\n<p>5.在Schema Details界面输入所需信息，然后按[下一页]</p>\n<p>6.在Database Options输入所需的信息，然后按[下一页]<br>可默认</p>\n<p>7.大小细节，建议进入用户自定义，可以使用1GB按[下一步]。</p>\n<p>8.最后，指定并行度，然后按[完成]</p>\n<p>9.日志在一个单独的窗口中打开。</p>\n<p>10.打开完成后的模式创建完成界面。并按[确定]退出。</p>\n<ul>\n<li><p>测试</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">cd &#x2F;home&#x2F;oracle&#x2F;swingbench&#x2F;bin</span><br><span class=\"line\">.&#x2F;swingbench -cs &#x2F;&#x2F;oracledb01&#x2F;orcl112 -dt thin  -rt 0:05</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"测试中遇到的问题和解决方法\"><a href=\"#测试中遇到的问题和解决方法\" class=\"headerlink\" title=\"测试中遇到的问题和解决方法\"></a>测试中遇到的问题和解决方法</h1><ol>\n<li><p>生成AWR<br> 在测试开始时可以生成awr快照，但是结束时没有自动生成awr快照。可以运行下列<br> 语句手工生成：</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt;</span><br><span class=\"line\">exec DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT ;</span><br></pre></td></tr></table></figure></li>\n<li><p>遇到等待事件<br> resmgr:cpu quantum<br> 根据metalink的note禁止资源管理</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt;</span><br><span class=\"line\">alter system set resource_manager_plan&#x3D;&#39;&#39; scope&#x3D;both;</span><br></pre></td></tr></table></figure></li>\n<li><p>运行swingbench, 没有显示cpu和disk的实时图形<br> ./swingbench -cpuloc localhost 带选项-cpuloc，如果是2.4版本，可以指定hostname和用户密码</p>\n</li>\n<li><p>遇到ora-03111错误<br> 查了metalink的note可以通过调节sdu来解决，不过有时还是会出现。<br> (SDU = 16384)<br> (TDU = 16384)</p>\n</li>\n</ol>\n","more":"<p>Swingbench is a free load generator (and benchmarks) designed to stress test an Oracle database (10g,11g,12c).</p>\n<h1 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h1><ul>\n<li>Swingbench组件：<br>  Swingbench是一个图形界面，用户可以编辑配置参数。可以显示实时的图形。<br>  Minibench是一个图形界面，可以显示简单的实时图形。<br>  Charbench是一个命令行的工具，有很多的命令行选项。</li>\n<li>  四种基准测试</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Benchmark</th>\n<th align=\"left\">描述</th>\n<th align=\"left\">读写比例</th>\n<th align=\"left\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Order Entry</td>\n<td align=\"left\">经典的Order Entry基准测试。像TPC。</td>\n<td align=\"left\">60/40</td>\n<td align=\"left\">TPC-C类似的，基于Oracle自带的两个Sample Schema：OE和SH</td>\n</tr>\n<tr>\n<td align=\"left\">Calling Circle</td>\n<td align=\"left\">电话公司自助系统</td>\n<td align=\"left\">70/30</td>\n<td align=\"left\">基于电话自助服务系统的基准测试，大小相对固定，每次运行都需要重新生成schema</td>\n</tr>\n<tr>\n<td align=\"left\">Stess Test</td>\n<td align=\"left\">简单的INSERT/DELETE/UPDATE/SELECT</td>\n<td align=\"left\">50/50</td>\n<td align=\"left\">Stress Test是最简单的测试，执行insert/update/delete/select的操作，数据是在运行时产生，可以用于测试TimesTen</td>\n</tr>\n<tr>\n<td align=\"left\">Sales History</td>\n<td align=\"left\">DSS基准测试</td>\n<td align=\"left\">100/0</td>\n<td align=\"left\">数据仓库基准测试，使用datagenerator产生数据，由disk和时间来决定最大的大小，基于Oracle自带的两个Sample Schema：OE和SH</td>\n</tr>\n</tbody></table>\n<h1 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h1><ul>\n<li>  Linux</li>\n<li>  Oracle Database 11</li>\n</ul>\n<h1 id=\"架构示意图\"><a href=\"#架构示意图\" class=\"headerlink\" title=\"架构示意图\"></a>架构示意图</h1><p><img src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/22/89110108255106186165209123221526149212127123_6500656c-5aef-11eb-9fab-fa1e86d74c00.png\" alt=\"img\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Longtao-W/pics@main/22/505624220682411041642202111351681361168348_665819b4-5aef-11eb-9549-fa1e86d74c00.png\" alt=\"img\"></p>\n<h1 id=\"安装和设置\"><a href=\"#安装和设置\" class=\"headerlink\" title=\"安装和设置\"></a>安装和设置</h1><ul>\n<li><p>下载<br>  目前作者已经发布了最新的2.5版本，本次使用2.5。从dominicgiles.com下载，地址：<a href=\"http://dominicgiles.com/downloads.html%E3%80%82\">http://dominicgiles.com/downloads.html。</a></p>\n</li>\n<li><p>验证Java版本<br>  2.4和2.5版本需要使用Java 6/7 JVM。</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#</span><br><span class=\"line\">yum install -y java-1.7.0-openjdk.x86_64</span><br><span class=\"line\">$</span><br><span class=\"line\">java -version</span><br><span class=\"line\">java version &quot;1.7.0_65&quot;</span><br></pre></td></tr></table></figure></li>\n<li><p>安装</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">pwd &#x2F;home&#x2F;oracle</span><br><span class=\"line\">unzip swingbench25932.zip</span><br><span class=\"line\">&lt;略&gt;</span><br><span class=\"line\">cd swingbench</span><br><span class=\"line\">pwd</span><br><span class=\"line\">&#x2F;home&#x2F;oracle&#x2F;swingbench</span><br></pre></td></tr></table></figure></li>\n<li><p>用户设置<br>  Unix/Linux平台配置文件为swingbench.env，执行文件路径为bin；Windows下则为swingbenchenv.bat和winbin。在windows平台上注意一定要配置ORACLE_HOME，好像不认注册表。<br>  Linux平台下，swingbench是在Oracle用户下执行，请确保它被设置在环境变量以下。</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">export ORACLE_BASE&#x3D;&#x2F;u01&#x2F;app&#x2F;oracle</span><br><span class=\"line\">export ORACLE_HOME&#x3D;$ORACLE_BASE&#x2F;product&#x2F;11.2.0&#x2F;dbhome_1</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h1><ul>\n<li><p>配置OE仓库</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">cd bin</span><br><span class=\"line\">.&#x2F;oewizard</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>1.按在欢迎屏幕[下一页]</p>\n<p>2.选择Benchmark版本，此处选择版本2.0，然后按[下一页]</p>\n<p>3.选择任务，选择“Create the Order Entry Schema（User,Tables,indexes,Data etc）”，然后按[下一页]</p>\n<p>4.在数据库的详细信息界面，输入必要的信息，然后按[下一页]</p>\n<p>5.在Schema Details界面输入所需信息，然后按[下一页]</p>\n<p>6.在Database Options输入所需的信息，然后按[下一页]<br>可默认</p>\n<p>7.大小细节，建议进入用户自定义，可以使用1GB按[下一步]。</p>\n<p>8.最后，指定并行度，然后按[完成]</p>\n<p>9.日志在一个单独的窗口中打开。</p>\n<p>10.打开完成后的模式创建完成界面。并按[确定]退出。</p>\n<ul>\n<li><p>测试</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$</span><br><span class=\"line\">cd &#x2F;home&#x2F;oracle&#x2F;swingbench&#x2F;bin</span><br><span class=\"line\">.&#x2F;swingbench -cs &#x2F;&#x2F;oracledb01&#x2F;orcl112 -dt thin  -rt 0:05</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"测试中遇到的问题和解决方法\"><a href=\"#测试中遇到的问题和解决方法\" class=\"headerlink\" title=\"测试中遇到的问题和解决方法\"></a>测试中遇到的问题和解决方法</h1><ol>\n<li><p>生成AWR<br> 在测试开始时可以生成awr快照，但是结束时没有自动生成awr快照。可以运行下列<br> 语句手工生成：</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt;</span><br><span class=\"line\">exec DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT ;</span><br></pre></td></tr></table></figure></li>\n<li><p>遇到等待事件<br> resmgr:cpu quantum<br> 根据metalink的note禁止资源管理</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SQL&gt;</span><br><span class=\"line\">alter system set resource_manager_plan&#x3D;&#39;&#39; scope&#x3D;both;</span><br></pre></td></tr></table></figure></li>\n<li><p>运行swingbench, 没有显示cpu和disk的实时图形<br> ./swingbench -cpuloc localhost 带选项-cpuloc，如果是2.4版本，可以指定hostname和用户密码</p>\n</li>\n<li><p>遇到ora-03111错误<br> 查了metalink的note可以通过调节sdu来解决，不过有时还是会出现。<br> (SDU = 16384)<br> (TDU = 16384)</p>\n</li>\n</ol>\n","categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"工具","path":"api/tags/工具.json"}]}