{"title":"yum使用","slug":"systemstructure/linux/centos/yum","date":"2020-03-25T15:20:21.000Z","updated":"2024-06-30T10:35:56.308Z","comments":true,"path":"api/articles/systemstructure/linux/centos/yum.json","excerpt":null,"covers":null,"content":"<p>[toc]</p>\n<h2 id=\"更改centos-yum-源\"><a href=\"#更改centos-yum-源\" class=\"headerlink\" title=\"更改centos yum 源\"></a>更改centos yum 源</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/yum.repos.d/CentOS-Base.rep</span><br></pre></td></tr></table></figure>\n\n<p>更改为</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[base]</span><br><span class=\"line\">name&#x3D;CentOS-$releasever - Base</span><br><span class=\"line\">baseurl&#x3D;http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;centos&#x2F;7.6.1810&#x2F;os&#x2F;x86_64&#x2F;</span><br><span class=\"line\">gpgcheck&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">[updates]</span><br><span class=\"line\">name&#x3D;CentOS-$releasever - Updates</span><br><span class=\"line\">baseurl&#x3D;https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;centos&#x2F;7.6.1810&#x2F;updates&#x2F;x86_64&#x2F;</span><br><span class=\"line\">gpgcheck&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">[extras]</span><br><span class=\"line\">name&#x3D;CentOS-$releasever - Extras</span><br><span class=\"line\">baseurl&#x3D;https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;centos&#x2F;7.6.1810&#x2F;extras&#x2F;x86_64&#x2F;</span><br><span class=\"line\">gpgcheck&#x3D;0</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[serverid]</span><br><span class=\"line\">#其中serverid是用于区别各个不同的repository（仓库;贮藏室;博物馆;亲信），必须有一个独一无二的名称。 重复了 前面覆盖后面--还是反过来呢？？？用enabled 测试是后面覆盖前面</span><br><span class=\"line\"></span><br><span class=\"line\">name&#x3D;Some name for this server</span><br><span class=\"line\">#name，是对repository的描述，支持像$releasever $basearch这样的变量; name&#x3D;Fedora Core $releasever - $basearch - Released Updates</span><br><span class=\"line\"></span><br><span class=\"line\">baseurl&#x3D;url:&#x2F;&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">#baseurl是服务器设置中最重要的部分，只有设置正确，才能从上面获取软件。它的格式是：</span><br><span class=\"line\">baseurl&#x3D;url:&#x2F;&#x2F;server1&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">url:&#x2F;&#x2F;server2&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">url:&#x2F;&#x2F;server3&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">#其中url支持的协议有 http:&#x2F;&#x2F; ftp:&#x2F;&#x2F; file:&#x2F;&#x2F;三种。baseurl后可以跟多个url，你可以自己改为速度比较快的镜像站，但baseurl只能有一个，也就是说不能像如下格式：</span><br><span class=\"line\">baseurl&#x3D;url:&#x2F;&#x2F;server1&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">baseurl&#x3D;url:&#x2F;&#x2F;server2&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">baseurl&#x3D;url:&#x2F;&#x2F;server3&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">其中url指向的目录必须是这个repository header目录的上一级，它也支持$releasever $basearch这样的变量。</span><br><span class=\"line\"></span><br><span class=\"line\">#mirrorlist&#x3D;http:&#x2F;&#x2F;mirrors.fedoraproject.org&#x2F;mirrorlist?repo&#x3D;fedora-$releasever&amp;arch&#x3D;$basearch</span><br><span class=\"line\">#上面的这一行是指定一个镜像服务器的地址列表，通常是开启的，本例中加了注释符号禁用了，我们可以试试，将$releasever和$basearch替换成自己对应的版本和架构，例如10和i386，在浏览器中打开，我们就能看到一长串镜可用的镜像服务器地址列表。</span><br><span class=\"line\"></span><br><span class=\"line\">url之后可以加上多个选项，如gpgcheck、exclude、failovermethod等，比如：</span><br><span class=\"line\">gpgcheck&#x3D;1</span><br><span class=\"line\">exclude&#x3D;gaim</span><br><span class=\"line\">#其中gpgcheck，exclude的含义和[main]部分相同，但只对此服务器起作用，</span><br><span class=\"line\">failovermethod&#x3D;priority</span><br><span class=\"line\">#failovermethode 有两个选项roundrobin和priority，意思分别是有多个url可供选择时，yum选择的次序，roundrobin是随机选择，如果连接失 败则使用下一个，依次循环，priority则根据url的次序从第一个开始。如果不指明，默认是roundrobin。</span><br><span class=\"line\"></span><br><span class=\"line\">enabled&#x3D;[1 or 0]</span><br><span class=\"line\">#当某个软件仓库被配置成 enabled&#x3D;0 时，yum 在安装或升级软件包时不会将该仓库做为软件包提供源。使用这个选项，可以启用或禁用软件仓库。</span><br><span class=\"line\">#通过 yum 的 --enablerepo&#x3D;[repo_name] 和 --disablerepo&#x3D;[repo_name] 选项，或者通过 PackageKit 的&quot;添加&#x2F;删除软件&quot;工具，也能够方便地启用和禁用指定的软件仓库</span><br></pre></td></tr></table></figure>\n\n<p>由于通过源码安装的qemu没有办法通过系统工具进行卸载，也没有办法通过make uninstall方法卸载，所以只能通过删除文件的方式进行卸载。</p>\n<p>qemu可执行文件默认放在/usr/local/bin，库文件默认放在/usr/local/libexec，配置文件默认放在/usr/local/etc，共享文件默认放在/usr/local/etc/share。要卸载源码编译的qemu，需要到这四个目录中找出相关的文件然后删除掉。</p>\n<p>如果configure时没有通过–target-list=指定编译的目标机体系结构，则/usr/local/bin中的以qemu开头的文件需要删除，总共51个。</p>\n<p>/usr/local/libexec中只有一个文件：qemu-bridge-helper，直接删除即可。</p>\n<p>/usr/local/etc比较简单，只有一个qemu目录，其下有一个文件target-x86_64.conf，直接将qemu目录删除即可。</p>\n<p>同/usr/local/etc一样，qemu相关的共享文件都放在/usr/local/etc/share目录下的qemu子目录中，直接将该子目录删除即可。</p>\n<h2 id=\"设置本地yum源\"><a href=\"#设置本地yum源\" class=\"headerlink\" title=\"设置本地yum源\"></a>设置本地yum源</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">创建rpm包文件存放目录及复制相关文件</span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> mkdir -pv /mnt/CentOS7_ISO</span></span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /run/media/robin/CentOS\\ 7\\ x86_64/</span></span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> cp -R * /mnt/CentOS7_ISO/</span></span><br><span class=\"line\"></span><br><span class=\"line\">修改yum源repo文件配置</span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /etc/yum.repos.d/</span></span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> mkdir old</span></span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> mv *.repo old</span></span><br><span class=\"line\"></span><br><span class=\"line\">编辑repo配置文件</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> vim /etc/yum.repos.d/longtao.repo</span></span><br><span class=\"line\">[longtao]</span><br><span class=\"line\">name=longtao local repository</span><br><span class=\"line\">baseurl=file/root/qemu-kvm-ev</span><br><span class=\"line\">gpgcheck=0</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">清空yum缓存目录</span><br><span class=\"line\">  [root@centos7-router yum.repos.d]# yum clean all</span><br><span class=\"line\">  Loaded plugins: fastestmirror, langpacks</span><br><span class=\"line\">  Cleaning repos: local-media</span><br><span class=\"line\">  Cleaning up everything</span><br><span class=\"line\">  Cleaning up list of fastest mirrors</span><br><span class=\"line\"></span><br><span class=\"line\">生成yum元数据</span><br><span class=\"line\">  [root@centos7-router yum.repos.d]# yum makecache</span><br><span class=\"line\">  Loaded plugins: fastestmirror, langpacks</span><br><span class=\"line\">  local-media                                                                        | 3.6 kB  00:00:00    </span><br><span class=\"line\">  (1/4): local-media/group_gz                                                      | 155 kB  00:00:00    </span><br><span class=\"line\">  (2/4): local-media/primary_db                                                    | 2.8 MB  00:00:00    </span><br><span class=\"line\">  (3/4): local-media/other_db                                                      | 1.2 MB  00:00:00    </span><br><span class=\"line\">  (4/4): local-media/filelists_db                                                  | 2.9 MB  00:00:00    </span><br><span class=\"line\">  Determining fastest mirrors</span><br><span class=\"line\">  Metadata Cache Created  ###提示元数据缓存创建成功</span><br><span class=\"line\"></span><br><span class=\"line\">查看本机yum repo 仓库</span><br><span class=\"line\">  [root@centos7-router ~]# yum repolist</span><br><span class=\"line\">  Loaded plugins: fastestmirror, langpacks</span><br><span class=\"line\">  Loading mirror speeds from cached hostfile</span><br><span class=\"line\">  repo id                                               repo name                    status</span><br><span class=\"line\">  local-media                                        CentOS-7 - Media                   3,723</span><br><span class=\"line\">  repolist: 3,723</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"临时源\"><a href=\"#临时源\" class=\"headerlink\" title=\"临时源\"></a>临时源</h2><h2 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h2><ol>\n<li><code>yum update</code>别运行，可能把内核和上面的软件都更新了</li>\n<li></li>\n</ol>\n","more":"<p>[toc]</p>\n<h2 id=\"更改centos-yum-源\"><a href=\"#更改centos-yum-源\" class=\"headerlink\" title=\"更改centos yum 源\"></a>更改centos yum 源</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/yum.repos.d/CentOS-Base.rep</span><br></pre></td></tr></table></figure>\n\n<p>更改为</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[base]</span><br><span class=\"line\">name&#x3D;CentOS-$releasever - Base</span><br><span class=\"line\">baseurl&#x3D;http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;centos&#x2F;7.6.1810&#x2F;os&#x2F;x86_64&#x2F;</span><br><span class=\"line\">gpgcheck&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">[updates]</span><br><span class=\"line\">name&#x3D;CentOS-$releasever - Updates</span><br><span class=\"line\">baseurl&#x3D;https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;centos&#x2F;7.6.1810&#x2F;updates&#x2F;x86_64&#x2F;</span><br><span class=\"line\">gpgcheck&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">[extras]</span><br><span class=\"line\">name&#x3D;CentOS-$releasever - Extras</span><br><span class=\"line\">baseurl&#x3D;https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;centos&#x2F;7.6.1810&#x2F;extras&#x2F;x86_64&#x2F;</span><br><span class=\"line\">gpgcheck&#x3D;0</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[serverid]</span><br><span class=\"line\">#其中serverid是用于区别各个不同的repository（仓库;贮藏室;博物馆;亲信），必须有一个独一无二的名称。 重复了 前面覆盖后面--还是反过来呢？？？用enabled 测试是后面覆盖前面</span><br><span class=\"line\"></span><br><span class=\"line\">name&#x3D;Some name for this server</span><br><span class=\"line\">#name，是对repository的描述，支持像$releasever $basearch这样的变量; name&#x3D;Fedora Core $releasever - $basearch - Released Updates</span><br><span class=\"line\"></span><br><span class=\"line\">baseurl&#x3D;url:&#x2F;&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">#baseurl是服务器设置中最重要的部分，只有设置正确，才能从上面获取软件。它的格式是：</span><br><span class=\"line\">baseurl&#x3D;url:&#x2F;&#x2F;server1&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">url:&#x2F;&#x2F;server2&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">url:&#x2F;&#x2F;server3&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">#其中url支持的协议有 http:&#x2F;&#x2F; ftp:&#x2F;&#x2F; file:&#x2F;&#x2F;三种。baseurl后可以跟多个url，你可以自己改为速度比较快的镜像站，但baseurl只能有一个，也就是说不能像如下格式：</span><br><span class=\"line\">baseurl&#x3D;url:&#x2F;&#x2F;server1&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">baseurl&#x3D;url:&#x2F;&#x2F;server2&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">baseurl&#x3D;url:&#x2F;&#x2F;server3&#x2F;path&#x2F;to&#x2F;repository&#x2F;</span><br><span class=\"line\">其中url指向的目录必须是这个repository header目录的上一级，它也支持$releasever $basearch这样的变量。</span><br><span class=\"line\"></span><br><span class=\"line\">#mirrorlist&#x3D;http:&#x2F;&#x2F;mirrors.fedoraproject.org&#x2F;mirrorlist?repo&#x3D;fedora-$releasever&amp;arch&#x3D;$basearch</span><br><span class=\"line\">#上面的这一行是指定一个镜像服务器的地址列表，通常是开启的，本例中加了注释符号禁用了，我们可以试试，将$releasever和$basearch替换成自己对应的版本和架构，例如10和i386，在浏览器中打开，我们就能看到一长串镜可用的镜像服务器地址列表。</span><br><span class=\"line\"></span><br><span class=\"line\">url之后可以加上多个选项，如gpgcheck、exclude、failovermethod等，比如：</span><br><span class=\"line\">gpgcheck&#x3D;1</span><br><span class=\"line\">exclude&#x3D;gaim</span><br><span class=\"line\">#其中gpgcheck，exclude的含义和[main]部分相同，但只对此服务器起作用，</span><br><span class=\"line\">failovermethod&#x3D;priority</span><br><span class=\"line\">#failovermethode 有两个选项roundrobin和priority，意思分别是有多个url可供选择时，yum选择的次序，roundrobin是随机选择，如果连接失 败则使用下一个，依次循环，priority则根据url的次序从第一个开始。如果不指明，默认是roundrobin。</span><br><span class=\"line\"></span><br><span class=\"line\">enabled&#x3D;[1 or 0]</span><br><span class=\"line\">#当某个软件仓库被配置成 enabled&#x3D;0 时，yum 在安装或升级软件包时不会将该仓库做为软件包提供源。使用这个选项，可以启用或禁用软件仓库。</span><br><span class=\"line\">#通过 yum 的 --enablerepo&#x3D;[repo_name] 和 --disablerepo&#x3D;[repo_name] 选项，或者通过 PackageKit 的&quot;添加&#x2F;删除软件&quot;工具，也能够方便地启用和禁用指定的软件仓库</span><br></pre></td></tr></table></figure>\n\n<p>由于通过源码安装的qemu没有办法通过系统工具进行卸载，也没有办法通过make uninstall方法卸载，所以只能通过删除文件的方式进行卸载。</p>\n<p>qemu可执行文件默认放在/usr/local/bin，库文件默认放在/usr/local/libexec，配置文件默认放在/usr/local/etc，共享文件默认放在/usr/local/etc/share。要卸载源码编译的qemu，需要到这四个目录中找出相关的文件然后删除掉。</p>\n<p>如果configure时没有通过–target-list=指定编译的目标机体系结构，则/usr/local/bin中的以qemu开头的文件需要删除，总共51个。</p>\n<p>/usr/local/libexec中只有一个文件：qemu-bridge-helper，直接删除即可。</p>\n<p>/usr/local/etc比较简单，只有一个qemu目录，其下有一个文件target-x86_64.conf，直接将qemu目录删除即可。</p>\n<p>同/usr/local/etc一样，qemu相关的共享文件都放在/usr/local/etc/share目录下的qemu子目录中，直接将该子目录删除即可。</p>\n<h2 id=\"设置本地yum源\"><a href=\"#设置本地yum源\" class=\"headerlink\" title=\"设置本地yum源\"></a>设置本地yum源</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">创建rpm包文件存放目录及复制相关文件</span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> mkdir -pv /mnt/CentOS7_ISO</span></span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /run/media/robin/CentOS\\ 7\\ x86_64/</span></span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> cp -R * /mnt/CentOS7_ISO/</span></span><br><span class=\"line\"></span><br><span class=\"line\">修改yum源repo文件配置</span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /etc/yum.repos.d/</span></span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> mkdir old</span></span><br><span class=\"line\"><span class=\"meta\">  #</span><span class=\"bash\"> mv *.repo old</span></span><br><span class=\"line\"></span><br><span class=\"line\">编辑repo配置文件</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> vim /etc/yum.repos.d/longtao.repo</span></span><br><span class=\"line\">[longtao]</span><br><span class=\"line\">name=longtao local repository</span><br><span class=\"line\">baseurl=file/root/qemu-kvm-ev</span><br><span class=\"line\">gpgcheck=0</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">清空yum缓存目录</span><br><span class=\"line\">  [root@centos7-router yum.repos.d]# yum clean all</span><br><span class=\"line\">  Loaded plugins: fastestmirror, langpacks</span><br><span class=\"line\">  Cleaning repos: local-media</span><br><span class=\"line\">  Cleaning up everything</span><br><span class=\"line\">  Cleaning up list of fastest mirrors</span><br><span class=\"line\"></span><br><span class=\"line\">生成yum元数据</span><br><span class=\"line\">  [root@centos7-router yum.repos.d]# yum makecache</span><br><span class=\"line\">  Loaded plugins: fastestmirror, langpacks</span><br><span class=\"line\">  local-media                                                                        | 3.6 kB  00:00:00    </span><br><span class=\"line\">  (1/4): local-media/group_gz                                                      | 155 kB  00:00:00    </span><br><span class=\"line\">  (2/4): local-media/primary_db                                                    | 2.8 MB  00:00:00    </span><br><span class=\"line\">  (3/4): local-media/other_db                                                      | 1.2 MB  00:00:00    </span><br><span class=\"line\">  (4/4): local-media/filelists_db                                                  | 2.9 MB  00:00:00    </span><br><span class=\"line\">  Determining fastest mirrors</span><br><span class=\"line\">  Metadata Cache Created  ###提示元数据缓存创建成功</span><br><span class=\"line\"></span><br><span class=\"line\">查看本机yum repo 仓库</span><br><span class=\"line\">  [root@centos7-router ~]# yum repolist</span><br><span class=\"line\">  Loaded plugins: fastestmirror, langpacks</span><br><span class=\"line\">  Loading mirror speeds from cached hostfile</span><br><span class=\"line\">  repo id                                               repo name                    status</span><br><span class=\"line\">  local-media                                        CentOS-7 - Media                   3,723</span><br><span class=\"line\">  repolist: 3,723</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"临时源\"><a href=\"#临时源\" class=\"headerlink\" title=\"临时源\"></a>临时源</h2><h2 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h2><ol>\n<li><code>yum update</code>别运行，可能把内核和上面的软件都更新了</li>\n<li></li>\n</ol>\n","categories":[{"name":"编程技术","path":"api/categories/编程技术.json"}],"tags":[{"name":"编程原理","path":"api/tags/编程原理.json"}]}